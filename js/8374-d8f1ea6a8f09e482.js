"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8374],{3280:(e,t,a)=>{a.d(t,{Nx:()=>l,nL:()=>i,uI:()=>r});var s=a(37876);let r=e=>{let{className:t}=e;return(0,s.jsxs)("svg",{width:"35",height:"24",viewBox:"0 0 35 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"23",rx:"3.5",fill:"white",stroke:"#D9D9D9"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.75 17.1569C16.5584 18.1852 15.0128 18.806 13.3238 18.806C9.55511 18.806 6.5 15.7154 6.5 11.903C6.5 8.09057 9.55511 5 13.3238 5C15.0128 5 16.5584 5.62075 17.75 6.64903C18.9416 5.62075 20.4872 5 22.1762 5C25.9449 5 29 8.09057 29 11.903C29 15.7154 25.9449 18.806 22.1762 18.806C20.4872 18.806 18.9416 18.1852 17.75 17.1569Z",fill:"#ED0006"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.75 17.1569C19.2172 15.8908 20.1475 14.0068 20.1475 11.903C20.1475 9.79917 19.2172 7.91517 17.75 6.64903C18.9416 5.62075 20.4872 5 22.1762 5C25.9449 5 29 8.09057 29 11.903C29 15.7154 25.9449 18.806 22.1762 18.806C20.4872 18.806 18.9416 18.1852 17.75 17.1569Z",fill:"#F9A000"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.7491 6.64844C19.2163 7.91457 20.1466 9.79856 20.1466 11.9024C20.1466 14.0062 19.2163 15.8902 17.7491 17.1563C16.2819 15.8902 15.3516 14.0062 15.3516 11.9024C15.3516 9.79856 16.2819 7.91457 17.7491 6.64844Z",fill:"#FF5E00"})]})},i=e=>{let{className:t}=e;return(0,s.jsxs)("svg",{width:"35",height:"24",viewBox:"0 0 35 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"23",rx:"3.5",fill:"white",stroke:"#D9D9D9"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6253 16.2582H8.50494L6.91495 10.1924C6.83949 9.91334 6.67925 9.66667 6.44354 9.5504C5.85531 9.25823 5.20712 9.0257 4.5 8.90843V8.6749H7.91567C8.38708 8.6749 8.74064 9.0257 8.79957 9.43313L9.62454 13.8086L11.7438 8.6749H13.8052L10.6253 16.2582ZM14.9838 16.2582H12.9813L14.6302 8.6749H16.6327L14.9838 16.2582ZM19.2234 10.7757C19.2823 10.3673 19.6359 10.1337 20.0483 10.1337C20.6965 10.0751 21.4026 10.1924 21.9919 10.4835L22.3454 8.85081C21.7562 8.61727 21.108 8.5 20.5198 8.5C18.5762 8.5 17.162 9.55041 17.162 11.0082C17.162 12.1173 18.1637 12.6996 18.8708 13.0504C19.6359 13.4002 19.9305 13.6338 19.8716 13.9835C19.8716 14.5082 19.2823 14.7418 18.6941 14.7418C17.9869 14.7418 17.2798 14.5669 16.6327 14.2747L16.2791 15.9085C16.9862 16.1996 17.7512 16.3169 18.4584 16.3169C20.6376 16.3745 21.9919 15.3251 21.9919 13.75C21.9919 11.7665 19.2234 11.6502 19.2234 10.7757ZM29 16.2582L27.41 8.6749H25.7022C25.3486 8.6749 24.9951 8.90843 24.8772 9.25823L21.9329 16.2582H23.9943L24.4058 15.1502H26.9386L27.1743 16.2582H29ZM25.9968 10.7171L26.585 13.5751H24.9361L25.9968 10.7171Z",fill:"#172B85"})]})},l=e=>{let{className:t}=e;return(0,s.jsxs)("svg",{width:"35",height:"24",viewBox:"0 0 35 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:"34",height:"23",rx:"3.5",fill:"#1F72CD",stroke:"#D9D9D9"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.68111 8.5L3.5 15.7467H7.30824L7.78035 14.5913H8.85949L9.3316 15.7467H13.5234V14.8649L13.8969 15.7467H16.0652L16.4387 14.8462V15.7467H25.1566L26.2166 14.6213L27.2092 15.7467L31.6868 15.7561L28.4957 12.1436L31.6868 8.5H27.2786L26.2467 9.60463L25.2854 8.5H15.8016L14.9872 10.3704L14.1537 8.5H10.3534V9.35186L9.93068 8.5H6.68111ZM19.6994 9.52905H24.7055L26.2367 11.2316L27.8172 9.52905H29.3484L27.0219 12.1426L29.3484 14.726H27.7477L26.2166 13.0036L24.628 14.726H19.6994V9.52905ZM20.9356 11.555V10.6057V10.6048H24.0593L25.4223 12.1229L23.9989 13.6493H20.9356V12.613H23.6667V11.555H20.9356ZM7.41799 9.52905H9.2743L11.3843 14.4431V9.52905H13.4178L15.0476 13.0524L16.5496 9.52905H18.573V14.7291H17.3418L17.3317 10.6544L15.5368 14.7291H14.4355L12.6305 10.6544V14.7291H10.0977L9.61756 13.5633H7.02338L6.54421 14.728H5.18717L7.41799 9.52905ZM7.46634 12.4856L8.32101 10.4089L9.1747 12.4856H7.46634Z",fill:"white"})]})}},5897:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(37876);let r=e=>{let{className:t,style:a,children:r,...i}=e;return(0,s.jsx)("div",{className:"anime-bg ".concat(t||""),style:a,...i,children:r})}},58374:(e,t,a)=>{a.d(t,{A:()=>w});var s=a(37876),r=a(14232),i=a(61902),l=a(4241),n=a(78567);let c=e=>{let{theme:t="dark",clientSecret:a,children:c,stripeAccountId:d}=e,o=(0,r.useMemo)(()=>n.A.config.stripePublicKey?d?(0,l.c)(n.A.config.stripePublicKey,{stripeAccount:d}):(0,l.c)(n.A.config.stripePublicKey):null,[d]),m={theme:"stripe"};return o?(0,s.jsx)(i.Elements,{stripe:o,options:a?{clientSecret:a,appearance:m}:{mode:"payment",amount:1e3,currency:"usd",appearance:m},children:c}):(0,s.jsx)("div",{className:"w-full text-center text-sm text-red-500",children:"Payment system is not configured. Please contact support."})};var d=a(5797),o=a(54819),m=a(5897),u=a(3280),p=a(67642),x=a(45261),h=a(83779),y=a(23413);let g=e=>{let{cartItems:t,setCartItems:a,vendorUserId:l,onClose:n,theme:c="dark",onRemoveItem:g,onProceedToShipping:v,onNext:f,onOpenPrivacyModal:j,onOpenTermsModal:b,onOpenReturnPolicyModal:N,isSample:w=!1}=e,S=(0,i.useStripe)(),k=(0,i.useElements)(),[I,C]=(0,r.useState)(!1),[_,P]=(0,r.useState)(null),[F,T]=(0,r.useState)(!0),[q,L]=(0,r.useState)(!1),[M,E]=(0,r.useState)(!1),[H,D]=(0,r.useState)(!1),[A,R]=(0,r.useState)(null),[B,$]=(0,r.useState)(0),[z,O]=(0,r.useState)(0),[V,U]=(0,r.useState)(0),[Z,G]=(0,r.useState)(null),J=true,W=t.reduce((e,t)=>e+t.price*t.quantity,0),K=A?Number(A.rate):0,Y=W+K+B+z+V,Q=(0,p.O)(Y),X=e=>e.templateTitle||e.productTitle||e.variantName,ee=e=>{let a=t.map(e=>({name:"".concat(X(e)," - ").concat(e.color," / ").concat(e.size),amount:Math.round(e.price*e.quantity*100)}));return e&&a.push({name:"".concat(e.name," Shipping"),amount:Math.round(100*Number(e.rate))}),a},[et,ea]=(0,r.useState)([]),es=async e=>{let{address:a,resolve:s,reject:r}=e;G(a),D(!0);try{let e=t.map(e=>({variantId:String(e.variantId),quantity:e.quantity,externalProductId:e.externalProductId})),n=await (0,h.y0)({address1:"N/A or partial",city:a.city||"",country_code:a.country||"",state_code:a.state||"",zip:a.postal_code||""},e);if(Array.isArray(n)&&n.length>0){var i;ea(n);let e=n[0];R(e);let r=n.map(e=>({id:e.id,amount:Math.round(100*Number.parseFloat(e.rate)),displayName:e.name,deliveryEstimate:{minimum:{unit:"business_day",value:e.minDeliveryDays},maximum:{unit:"business_day",value:e.maxDeliveryDays}}})),c=t.map(e=>({product_template_id:e.templateId,variant_id:e.variantId,quantity:e.quantity,price:e.price.toFixed(2),retail_price:e.price.toFixed(2)})),d={name:"Guest",email:"orders@link.me",address1:"N/A",address2:"",city:a.city||"",state_code:a.state||"",country_code:a.country||"",zip:a.postal_code||"",phone:""},o=w?await (0,h.Jd)({shippingMethod:e.id,recipient:d,items:c,templateId:(null==(i=c[0])?void 0:i.product_template_id)||0}):await (0,h.BE)({shippingMethod:e.id,vendorUserId:String(l),recipient:d,items:c});$(Number(o.tax||0)),O(Number(o.platformFee||0)),U(Number(o.productSurcharge||0));let m=ee(e);o.tax>0&&m.push({name:"Tax",amount:Math.round(100*Number(o.tax))}),o.platformFee>0&&m.push({name:"Platform Fee",amount:Math.round(100*Number(o.platformFee))}),o.productSurcharge>0&&m.push({name:"Product Surcharge",amount:Math.round(100*Number(o.productSurcharge))}),setTimeout(()=>{D(!1),s({shippingRates:r,lineItems:m})},0)}else r()}catch(e){D(!1),r()}},er=async e=>{let{shippingRate:a,resolve:s}=e,r=et.find(e=>e.id===a.id);if(r)try{var i;R(r),D(!0),await new Promise(e=>setTimeout(e,100));let e=t.map(e=>({product_template_id:e.templateId,variant_id:e.variantId,quantity:e.quantity,price:e.price.toFixed(2),retail_price:e.price.toFixed(2)})),a=Z?{name:Z.name||"Guest",email:Z.email||"guest@example.com",address1:Z.line1||"N/A",address2:Z.line2||"",city:Z.city||"",state_code:Z.state||"",country_code:Z.country||"",zip:Z.postal_code||"",phone:""}:{name:"Guest",email:"guest@example.com",address1:"N/A",address2:"",city:"",state_code:"",country_code:"",zip:"",phone:""},n=w?await (0,h.Jd)({shippingMethod:r.id,recipient:a,items:e,templateId:(null==(i=e[0])?void 0:i.product_template_id)||0}):await (0,h.BE)({shippingMethod:r.id,vendorUserId:String(l),recipient:a,items:e}),c=Number(n.tax||0),d=Number(n.platformFee||0),o=Number(n.productSurcharge||0);$(c),O(d),U(o),await new Promise(e=>setTimeout(e,100));let m=t.map(e=>({name:"".concat(X(e)," - ").concat(e.color," / ").concat(e.size),amount:Math.round(e.price*e.quantity*100)}));m.push({name:"".concat(r.name," Shipping"),amount:Math.round(100*Number(r.rate))}),c>0&&m.push({name:"Tax",amount:Math.round(100*c)}),d>0&&m.push({name:"Platform Fee",amount:Math.round(100*d)}),o>0&&m.push({name:"Product Surcharge",amount:Math.round(100*o)}),D(!1),s({lineItems:m})}catch(e){D(!1),s({lineItems:ee(r)})}else throw D(!1),Error("No matching shipping rate found")},ei=async e=>{if(!S||!k)return;let{shippingAddress:s,billingDetails:r,shippingRate:i,paymentFailed:n,expressPaymentType:c}=e;try{var d;if(!s||!r||!i)throw Error("Missing required fields for shipping and billing.");let e={name:s.name||"",email:r.email||"",address:{line1:s.address.line1||"",line2:s.address.line2||"",city:s.address.city||"",state:s.address.state||"",postal_code:s.address.postal_code||"",country:s.address.country||""}},c=t.map(e=>({variantId:String(e.variantId),quantity:e.quantity,templateId:e.templateId?String(e.templateId):void 0,externalProductId:e.externalProductId})),o=null==(d=t[0])?void 0:d.templateId;if(w&&!o)throw n({reason:"fail"}),Error("Template ID is required for sample orders");let m=w?await (0,h.Hu)({vendorUserId:String(l),email:r.email,items:c,shipping:e,shippingRateId:i.id,tax:B,platformFee:z,productSurcharge:V,total:Y,templateId:Number(o)}):await (0,h.Bc)({vendorUserId:String(l),email:r.email,items:c,shipping:e,shippingRateId:i.id,tax:B,platformFee:z,productSurcharge:V,total:Y});if(!(null==m?void 0:m.success)||!(null==m?void 0:m.clientSecret)||!(null==m?void 0:m.orderId))throw n({reason:"fail"}),Error("Failed to initialize payment or get clientSecret.");let{error:u}=await S.confirmPayment({elements:k,clientSecret:m.clientSecret,confirmParams:{return_url:window.location.href},redirect:"if_required"});if(u)P("An error occurred during payment."),n({reason:"fail"});else{let s={id:(null==A?void 0:A.id)||"",name:(null==A?void 0:A.name)||"",rate:(null==A?void 0:A.rate)||"0",currency:(null==A?void 0:A.currency)||"USD",minDeliveryDays:(null==A?void 0:A.minDeliveryDays)||0,maxDeliveryDays:(null==A?void 0:A.maxDeliveryDays)||0};y.uk.purchase({id:m.orderId,total:Y,tax:B,shipping:Number((null==A?void 0:A.rate)||0),items:t.map(e=>({id:e.variantId,name:X(e),price:e.price,quantity:e.quantity,category:"merchandise"})),currency:"USD"}),f(Number(m.orderId),e,s,B,z,V,Y),setTimeout(()=>{a([]),x.A.removeLocalstorage("SHOP_CART_DATA:".concat(l))},100)}}catch(e){P("An error occurred during payment."),n({reason:"fail"})}};return((0,r.useEffect)(()=>{t.length>0&&y.uk.viewCart({items:t.map(e=>({id:e.variantId,name:X(e),price:e.price,quantity:e.quantity,category:"merchandise"})),total:W})},[]),(0,r.useEffect)(()=>{let e=async e=>{try{var a;D(!0);let s=t.map(e=>({product_template_id:e.templateId,variant_id:e.variantId,quantity:e.quantity,price:e.price.toFixed(2),retail_price:e.price.toFixed(2)})),r=Z?{name:Z.name||"Guest",email:Z.email||"guest@example.com",address1:Z.line1||"N/A",address2:Z.line2||"",city:Z.city||"",state_code:Z.state||"",country_code:Z.country||"",zip:Z.postal_code||"",phone:""}:{name:"Guest",email:"guest@example.com",address1:"N/A",address2:"",city:"",state_code:"",country_code:"",zip:"",phone:""},i=w?await (0,h.Jd)({shippingMethod:e.id,recipient:r,items:s,templateId:(null==(a=s[0])?void 0:a.product_template_id)||0}):await (0,h.BE)({shippingMethod:e.id,vendorUserId:String(l),recipient:r,items:s});$(Number(i.tax||0)),O(Number(i.platformFee||0)),U(Number(i.productSurcharge||0)),D(!1)}catch(e){D(!1)}};A&&e(A)},[A,t,Z,w]),t.length)?(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4 lg:gap-8 lg:m-4 text-black",children:[(0,s.jsx)("div",{className:"lg:flex-[4] lg:pr-8 lg:border-r border-gray-300 space-y-3 py-3 border-b scrollbar-thick",children:t.map((e,r)=>(0,s.jsxs)(d.e,{as:"div",show:!0,enter:"transition ease-out duration-300",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",className:"flex justify-between rounded-lg bg-white",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[e.variantImage&&(0,s.jsx)("img",{src:e.variantImage,alt:X(e),className:"w-20 h-20 border border-gray-300 object-cover rounded-lg"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-black",children:[X(e),(0,s.jsx)("br",{}),e.color," / ",e.size]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[!w&&(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-lg px-2 bg-gray-200",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{if(g&&1===e.quantity)g(r);else{let s=[...t];s[r]={...e,quantity:e.quantity-1},a(s)}},className:"py-1 px-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50",disabled:e.quantity<=1,children:"-"}),(0,s.jsx)("span",{className:"text-sm text-black",children:e.quantity}),(0,s.jsx)("button",{type:"button",onClick:()=>{let s=[...t];s[r]={...e,quantity:e.quantity+1},a(s)},className:"py-1 px-2 text-gray-400 hover:text-white transition-colors",children:"+"})]}),g&&(0,s.jsx)("button",{type:"button",onClick:()=>g(r),className:"text-sm text-red-400 hover:text-red-300 transition",children:"Remove"})]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-medium text-black",children:["$",(e.price*e.quantity).toFixed(2)]})})]},"".concat(e.variantId,"-").concat(r)))}),(0,s.jsxs)("div",{className:"lg:flex-[6] min-w-[350px]",children:[(0,s.jsx)("div",{className:"transition-opacity duration-300 ".concat(M&&q?"opacity-100":"opacity-0 h-0 overflow-hidden"),children:(0,s.jsxs)("div",{className:"mb-2 relative",children:[(0,s.jsxs)("div",{className:"flex flex-nowrap justify-center sm:flex-row min-h-[56px]",children:[(F||Q||H)&&(0,s.jsx)("div",{className:"flex flex-col gap-2 w-full mx-auto absolute left-1/2 -translate-x-1/2",children:(0,s.jsx)(m.A,{className:"h-[44px] rounded-lg"})}),(0,s.jsx)("div",{className:"w-full ".concat(F||Q||H?"pointer-events-none opacity-50":""),children:(0,s.jsx)(i.ExpressCheckoutElement,{onClick:e=>{let{resolve:a}=e,s=ee(),r=s.reduce((e,t)=>e+t.amount,0);y.uk.expressCheckoutClick({items:t.map(e=>({id:e.variantId,name:X(e),price:e.price,quantity:e.quantity,category:"merchandise"})),total:W,payment_type:"express_checkout"}),a({shippingAddressRequired:!0,emailRequired:!0,lineItems:s,total:{amount:r,label:"Total",pending:!0},shippingRates:[{id:"standard",amount:599,displayName:"Standard Shipping",deliveryEstimate:{minimum:{unit:"business_day",value:5},maximum:{unit:"business_day",value:7}}},{id:"express",amount:1499,displayName:"Express Shipping",deliveryEstimate:{minimum:{unit:"business_day",value:2},maximum:{unit:"business_day",value:3}}}]})},onShippingAddressChange:es,onShippingRateChange:er,onConfirm:ei,options:{buttonHeight:48,layout:{maxColumns:0,maxRows:4},paymentMethods:{applePay:"always",googlePay:/iPhone|iPad|iPod/.test(navigator.userAgent)?"never":"always",amazonPay:"auto",link:"never"},buttonType:{applePay:"buy",googlePay:"buy"},buttonTheme:{applePay:J?"black":"white-outline",googlePay:J?"black":"white"},paymentMethodOrder:["apple","google"]},onReady:e=>{if(T(!1),e){let t=e.availablePaymentMethods;L((null==t?void 0:t.applePay)===!0||(null==t?void 0:t.googlePay)===!0||(null==t?void 0:t.amazonPay)===!0),E(!0)}},className:"w-full"})})]}),q&&(0,s.jsx)("p",{className:"text-center text-gray-600",children:"OR"})]})}),(0,s.jsxs)("div",{className:"flex flex-col items-center border-b border-gray-300 pb-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{y.uk.beginCheckout({items:t.map(e=>({id:e.variantId,name:X(e),price:e.price,quantity:e.quantity,category:"merchandise"})),total:W}),v()},disabled:I||H,className:"w-full py-3 mb-4 rounded-md font-medium hover:opacity-90 transition-colors disabled:opacity-50 bg-black text-white ".concat(H?"relative overflow-hidden":""),children:H?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"opacity-0",children:"Proceed to Checkout"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-white rounded-full animate-spin"})})]}):"Proceed to Checkout"}),(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("span",{className:"text-sm text-gray-800",children:"Use a credit or debit card"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u.Nx,{className:"h-6"}),(0,s.jsx)(u.uI,{className:"h-6"}),(0,s.jsx)(u.nL,{className:"h-6"})]})]}),_&&(0,s.jsx)("p",{className:"text-red-500 mt-2",children:_})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2 mt-4",children:[(0,s.jsx)("span",{className:"text-gray-800",children:"Subtotal"}),(0,s.jsxs)("span",{className:"text-black",children:["$",W.toFixed(2)]})]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(o.EN,{children:e=>{let{open:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.EN.Button,{className:"flex w-full justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"text-gray-800",children:"Shipping, Taxes & Fees"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"mr-2 text-black",children:["$",(K+B+z+V).toFixed(2)]}),(0,s.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(t?"transform rotate-180":""," text-gray-800"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(0,s.jsxs)(o.EN.Panel,{className:"pt-2 pb-1",children:[A&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsxs)("span",{className:"pl-4 text-gray-800",children:["Shipping (",A.name,")"]}),(0,s.jsxs)("span",{className:"text-black",children:["$",K.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Tax"}),(0,s.jsxs)("span",{className:"text-black",children:["$",B.toFixed(2)]})]}),V>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Product Surcharge"}),(0,s.jsxs)("span",{className:"text-black",children:["$",V.toFixed(2)]})]}),z>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Platform Fee"}),(0,s.jsxs)("span",{className:"text-black",children:["$",z.toFixed(2)]})]})]})]})}})}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"".concat(J?"text-gray-800":"text-gray-400"),children:"Total"}),(0,s.jsxs)("span",{className:"font-bold ".concat(J?"text-black":"text-white"),children:["$",Y.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm my-4 ".concat(J?"text-gray-600":"text-gray-400"),children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0  01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Secure Payment"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-700 mt-1 mb-2",children:["By submitting your order, you agree to our"," ",(0,s.jsx)("span",{className:"underline cursor-pointer",onClick:N,children:"Return Policy"}),", ",(0,s.jsx)("span",{className:"underline cursor-pointer",onClick:b,children:"Terms of Service"})," ",(0,s.jsx)("span",{children:"& "}),(0,s.jsx)("span",{className:"underline cursor-pointer",onClick:j,children:"Privacy Policy"}),"."]})]})]}):(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"My Bag"}),(0,s.jsx)("p",{className:"text-gray-400",children:"No items in bag."})]})};function v(e){let{cartItems:t,shipping:a,shippingRate:l,vendorUserId:n,onSuccess:c,onBack:m,theme:u="dark",computedTax:p,computedPlatformFee:x,computedTotal:y,productSurcharge:g=0,onOpenPrivacyModal:v,onOpenTermsModal:f,onOpenReturnPolicyModal:j,isSample:b=!1,isCalculatingCosts:N=!1}=e,w=(0,i.useStripe)(),S=(0,i.useElements)(),[k,I]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null),P=true;(0,r.useEffect)(()=>{if(w&&S&&y>0){var e;let t=Math.round(100*y);null==(e=S.update)||e.call(S,{amount:t})}},[w,S,y]);let F=async e=>{if(e.preventDefault(),w&&S&&!N){I(!0),_(null);try{var s;let{error:e}=await S.submit();if(e){_(e.message||"Payment validation failed."),I(!1);return}let r=t.map(e=>({templateId:e.templateId?String(e.templateId):void 0,variantId:e.variantId.toString(),quantity:e.quantity,externalProductId:e.externalProductId})),i=null==(s=t[0])?void 0:s.templateId;if(b&&!i)throw Error("Template ID is required for sample orders");let d=b?await (0,h.Hu)({vendorUserId:n.toString(),email:a.email,items:r,shipping:a,shippingRateId:null==l?void 0:l.id,tax:p,platformFee:x,total:y,templateId:Number(i)}):await (0,h.Bc)({vendorUserId:n.toString(),email:a.email,items:r,shipping:a,shippingRateId:null==l?void 0:l.id,tax:p,platformFee:x,total:y});if(!(null==d?void 0:d.success)||!(null==d?void 0:d.clientSecret)||!(null==d?void 0:d.orderId)){_("It seems that one of the items in your cart is not available. Please try again later."),I(!1);return}let{error:o}=await w.confirmPayment({elements:S,clientSecret:d.clientSecret,redirect:"if_required",confirmParams:{return_url:window.location.href}});if(o){_(o.message||"Payment failed."),I(!1);return}c(t,Number(d.orderId))}catch(e){_(e instanceof Error?e.message:"An error occurred during payment."),I(!1)}}},T=t.reduce((e,t)=>e+t.price*t.quantity,0),q=l?Number(l.rate):0,L=y>0?y:T+q+p+x+(g||0);return(0,s.jsx)(d.e,{appear:!0,show:!0,enter:"transition ease-out duration-300",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:(0,s.jsxs)("div",{className:"space-y-4 lg:pl-4",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold ".concat(P?"text-black":"text-white"),children:["Payment Method",(0,s.jsxs)("div",{className:"flex font-normal items-center text-gray-700 text-sm mt-2",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:[(0,s.jsx)("title",{children:"Secure lock icon"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})]}),"Secure Payment"]})]}),(0,s.jsxs)("form",{onSubmit:F,className:"mt-4 space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i.PaymentElement,{options:{layout:"accordion"}})}),C&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:C})]}),(0,s.jsx)("h2",{className:"lg:hidden text-2xl pt-4 font-bold ".concat(P?"text-black":"text-white"),children:"Order Summary"}),(0,s.jsxs)("div",{className:"pb-8 lg:absolute lg:top-0 lg:right-4 lg:w-[36%]",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Subtotal"}),(0,s.jsxs)("span",{className:"text-sm font-normal mr-3 ".concat(P?"text-black":"text-white"),children:["$",T.toFixed(2)]})]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(o.EN,{children:e=>{let{open:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.EN.Button,{className:"flex w-full justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"".concat(P?"text-gray-800":"text-gray-400"),children:"Shipping, Taxes & Fees"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"mr-2 ".concat(P?"text-black":"text-white"),children:["$",(q+p+(x||0)+(g||0)).toFixed(2)]}),(0,s.jsxs)("svg",{className:"w-4 h-4 transition-transform ".concat(t?"transform rotate-180":""," ").concat(P?"text-gray-800":"text-gray-400"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,s.jsx)("title",{children:"Toggle fee details"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})]})]})]}),(0,s.jsxs)(o.EN.Panel,{className:"pt-2 pb-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 ".concat(P?"text-gray-800":"text-gray-400"),children:"Shipping"}),(0,s.jsxs)("span",{className:"".concat(P?"text-black":"text-white"),children:["$",q.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 ".concat(P?"text-gray-800":"text-gray-400"),children:"Tax"}),(0,s.jsxs)("span",{className:"".concat(P?"text-black":"text-white"),children:["$",p.toFixed(2)]})]}),g>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 ".concat(P?"text-gray-800":"text-gray-400"),children:"Product Surcharge"}),(0,s.jsxs)("span",{className:"".concat(P?"text-black":"text-white"),children:["$",g.toFixed(2)]})]}),x>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 ".concat(P?"text-gray-800":"text-gray-400"),children:"Platform Fee"}),(0,s.jsxs)("span",{className:"".concat(P?"text-black":"text-white"),children:["$",x.toFixed(2)]})]})]})]})}})}),(0,s.jsx)("hr",{className:"border-gray-300 mb-4"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-lg text-gray-700",children:"Total"}),(0,s.jsxs)("span",{className:"text-lg font-semibold ".concat(P?"text-black":"text-white"),children:["$",L.toFixed(2)]})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 mb-8",children:[(0,s.jsxs)("p",{className:"text-xs text-gray-700 mt-1 mb-2",children:["By submitting your order, you agree to our"," ",(0,s.jsx)("button",{type:"button",className:"underline cursor-pointer text-left p-0 m-0 bg-transparent border-none text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:j,children:"Return Policy"}),", ",(0,s.jsx)("button",{type:"button",className:"underline cursor-pointer text-left p-0 m-0 bg-transparent border-none text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:f,children:"Terms of Service"})," ",(0,s.jsx)("span",{children:"& "}),(0,s.jsx)("button",{type:"button",className:"underline cursor-pointer text-left p-0 m-0 bg-transparent border-none text-xs text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:v,children:"Privacy Policy"}),"."]}),(0,s.jsx)("button",{type:"submit",disabled:k||!w||!S||N,onClick:F,className:"w-full h-[60px] px-3 py-2 font-bold text-xl rounded-md disabled:opacity-50 transition-colors\n                ".concat(P?"bg-black text-white hover:bg-gray-800":"bg-white text-black hover:bg-gray-200","\n                ").concat(k||N?"relative overflow-hidden":""),children:k||N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"opacity-0",children:"Pay Now"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-white rounded-full animate-spin"})})]}):"Pay Now"})]})})]})})}let f=e=>{let{orderId:t,onClose:a,theme:i="dark",orderItems:l=[],shippingRate:n,computedTax:c,computedPlatformFee:d,computedTotal:m,productSurcharge:u=0,shippingInfo:p={}}=e,x=(0,r.useCallback)(e=>e.templateTitle||e.productTitle||e.variantName,[]),h=l.reduce((e,t)=>e+t.price*t.quantity,0),y=n?Number(n.rate):0,g=m>0?m:h+y+c+d+(u||0);return(0,s.jsx)("div",{className:"flex-1 relative py-6 px-0 bg-white","data-testid":"shop-success",children:(0,s.jsxs)("div",{className:"lg:max-w-[50%]",children:[(0,s.jsxs)("div",{className:"flex gap-2 items-center mb-4 lg:px-3",children:[(0,s.jsx)("img",{src:"/images/iconOrderConfirm.svg",className:"w-[60px]",alt:"Order confirmation icon"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("span",{className:"text-[#666] text-sm",children:["Order #ORD-",t]}),(0,s.jsx)("span",{className:"text-[#000] text-lg",children:"Thank you!"})]})]}),(0,s.jsxs)("div",{className:"px-1 lg:px-4",children:[(0,s.jsx)("span",{className:"text-[#000] font-medium",children:"Your order is confirmed"}),(0,s.jsxs)("p",{className:"text-[#000] text-sm",children:["We're getting your order ready. A confirmation email has been sent to ",(0,s.jsx)("span",{className:"underline",children:null==p?void 0:p.email}),"."]})]}),l&&l.length>0&&(0,s.jsxs)("div",{className:"w-full mt-5 px-0 lg:px-3",children:[(0,s.jsx)("div",{className:"border border-gray-100 rounded-lg px-2 mb-4 bg-white",children:l.map((e,t)=>(0,s.jsx)("div",{className:"flex justify-between items-center py-2 ".concat(t<l.length-1?"border-b border-gray-100":""),children:(0,s.jsxs)("div",{className:"flex items-center",children:[e.variantImage&&(0,s.jsx)("div",{className:"w-12 h-12 mr-3 rounded-lg overflow-hidden border border-gray-200 shadow-sm",children:(0,s.jsx)("img",{src:e.variantImage,alt:x(e),className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-800",children:x(e)}),e.quantity>1&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.color," / ",e.size," ",(0,s.jsxs)("span",{className:"inline-flex items-center justify-center bg-green-100 text-green-800 px-1.5 py-0.5 rounded text-xs font-medium ml-1",children:["\xd7 ",e.quantity]})]})]})]})},"".concat(e.variantId,"-").concat(t)))}),p&&(0,s.jsxs)("div",{className:"px-1 lg:px-5 mt-5 pt-4 border-t border-gray-300 text-left",children:[(0,s.jsx)("h5",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Shipping address:"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,s.jsx)("p",{children:p.name}),(0,s.jsx)("p",{children:p.address.line1}),p.address.line2&&(0,s.jsx)("p",{children:p.address.line2}),(0,s.jsxs)("p",{children:[p.address.city,", ",p.address.state," ",p.address.postal_code]}),(0,s.jsx)("p",{children:p.address.country})]})]}),(0,s.jsxs)("div",{className:"pt-2 lg:absolute lg:top-3 lg:right-4 lg:w-[36%] mx-1 lg:mx-0 hidden lg:block",children:[(0,s.jsx)("hr",{className:"border-gray-300 mb-4 lg:hidden"}),(0,s.jsx)("span",{className:"lg:hidden font-medium text-[#000]",children:"Order Summary"}),(0,s.jsxs)("div",{className:"flex justify-between my-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Subtotal"}),(0,s.jsxs)("span",{className:"text-sm font-normal text-[#000]",children:["$",h.toFixed(2)]})]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(o.EN,{children:e=>{let{open:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.EN.Button,{className:"flex w-full justify-between items-center text-sm",children:[(0,s.jsx)("span",{className:"text-gray-800",children:"Shipping, Taxes & Fees"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"mr-2 text-black",children:["$",(y+c+(d||0)+(u||0)).toFixed(2)]}),(0,s.jsxs)("svg",{className:"w-4 h-4 transition-transform ".concat(t?"transform rotate-180":""," text-gray-800"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,s.jsx)("title",{children:"Toggle order details"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})]})]})]}),(0,s.jsxs)(o.EN.Panel,{className:"pt-2 pb-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Shipping"}),(0,s.jsxs)("span",{className:"text-black",children:["$",y.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Tax"}),(0,s.jsxs)("span",{className:"text-black",children:["$",c.toFixed(2)]})]}),u>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Product Surcharge"}),(0,s.jsxs)("span",{className:"text-black",children:["$",u.toFixed(2)]})]}),d>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm mb-2",children:[(0,s.jsx)("span",{className:"pl-4 text-gray-800",children:"Platform Fee"}),(0,s.jsxs)("span",{className:"text-black",children:["$",d.toFixed(2)]})]})]})]})}})}),(0,s.jsx)("hr",{className:"border-gray-300 mb-4"}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm lg:text-lg text-gray-700",children:"Total"}),(0,s.jsxs)("span",{className:"text-sm lg:text-lg font-semibold text-[#000]",children:["$",g.toFixed(2)]})]})]})]}),(0,s.jsxs)("div",{className:"px-1 lg:px-4 mt-8",children:[(0,s.jsx)("button",{type:"button",onClick:a,"data-testid":"close-button",className:"w-full py-3 bg-[#000] rounded-lg",children:"Continue Shopping"}),(0,s.jsxs)("p",{className:"mt-4 text-xs text-gray-400 flex items-center justify-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Secure transaction"]})]})]})})};var j=a(82708);function b(e){var t,a,s,r,i,l,n;return!!e&&!!(null==(t=e.name)?void 0:t.trim())&&!!(null==(a=e.email)?void 0:a.trim())&&!!(null==(s=e.address.line1)?void 0:s.trim())&&!!(null==(r=e.address.city)?void 0:r.trim())&&!!(null==(i=e.address.state)?void 0:i.trim())&&!!(null==(l=e.address.postal_code)?void 0:l.trim())&&!!(null==(n=e.address.country)?void 0:n.trim())&&!0}let N=e=>{let{cartItems:t,shipping:a,setShipping:l,shippingRate:n,setShippingRate:c,onBack:o,onNext:m,theme:u="dark",isCalculatingCosts:p=!1,isSample:x=!1}=e,[y,g]=(0,r.useState)(!b(a)),[v,f]=(0,r.useState)([]),[N,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null);(0,i.useElements)();let I=(0,j.A)(a,500);(0,r.useEffect)(()=>{b(I)&&(c(null),f([]),C(I))},[I,c]);let C=async e=>{if(b(e)){w(!0),k(null);try{let a=t.map(e=>({variantId:e.variantId.toString(),quantity:e.quantity,externalProductId:e.externalProductId})),s=await (0,h.y0)({address1:e.address.line1,city:e.address.city,country_code:e.address.country,state_code:e.address.state||void 0,zip:e.address.postal_code||void 0},a);Array.isArray(s)?(f(s),s.length>0&&c(s[0])):k("No shipping options available for this address.")}catch(e){k("Unable to fetch shipping rates. Please try again.")}finally{w(!1)}}};return(0,s.jsx)(d.e,{appear:!0,show:!0,enter:"transition ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)("div",{className:"w-full space-y-6 lg:pt-4 lg:pl-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mt-4 md:mt-0",children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-black",children:"Delivery"})}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(i.LinkAuthenticationElement,{options:{defaultValues:{email:a.email||""}},onChange:e=>{e.complete&&l(t=>({...t,email:e.value.email}))}})}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(i.AddressElement,{options:{mode:"shipping",defaultValues:{name:a.name,address:{line1:a.address.line1,line2:a.address.line2,city:a.address.city,state:a.address.state,postal_code:a.address.postal_code,country:a.address.country}}},onChange:e=>{if(e.complete){let t=e.value.address,a=e.value.name;l(e=>({...e,name:a,address:{line1:t.line1,line2:t.line2||"",city:t.city,state:t.state,postal_code:t.postal_code,country:t.country}}))}}})}),(N||v.length>0)&&(0,s.jsx)("div",{className:"flex items-center justify-between pt-4",children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-black",children:"Delivery Method"})}),N&&(0,s.jsx)("div",{className:"rounded-lg p-4bg-blue-50",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-400 border-t-white"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"Calculating shipping rates..."})]})}),v.length>0&&(0,s.jsx)("div",{className:"space-y-3 pb-4",children:v.map(e=>(0,s.jsxs)("label",{className:"flex items-start p-4 rounded-lg cursor-pointer transition-all ".concat((null==n?void 0:n.id)===e.id?"bg-blue-50 border-blue-200":"border-gray-200 hover:bg-gray-50"," border relative ").concat(p&&(null==n?void 0:n.id)===e.id?"opacity-70":""),children:[(0,s.jsx)("input",{type:"radio",name:"shippingOption",value:e.id,checked:(null==n?void 0:n.id)===e.id,onChange:()=>c(e),className:"mt-1",disabled:p}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[e.rate," ",e.currency,e.minDeliveryDays&&e.maxDeliveryDays&&(0,s.jsxs)("span",{className:"ml-2",children:["\xb7 ",e.minDeliveryDays,"-",e.maxDeliveryDays," business days"]})]})]}),p&&(null==n?void 0:n.id)===e.id&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 rounded-lg",children:(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})})]},e.id))}),S&&(0,s.jsx)("div",{className:"rounded-lg p-4 bg-red-50",children:(0,s.jsx)("p",{className:"text-sm text-red-700",children:S})})]})})},w=e=>{let{cartItems:t,setCartItems:a,onClose:i,vendorUserId:l,theme:n="dark",onRemoveItem:o,onStepChange:m,onOpenPrivacyModal:u,onOpenTermsModal:p,onOpenReturnPolicyModal:j,isSample:b=!1,stripeAccountId:w}=e,[S,k]=(0,r.useState)("cart"),[I,C]=(0,r.useState)(()=>({name:"",email:"",address:{line1:"",line2:"",city:"",state:"",postal_code:"",country:"US"}})),[_,P]=(0,r.useState)(null),[F,T]=(0,r.useState)(null),[q,L]=(0,r.useState)(0),[M,E]=(0,r.useState)(0),[H,D]=(0,r.useState)(0),[A,R]=(0,r.useState)(0),[B,$]=(0,r.useState)(!1),[z,O]=(0,r.useState)({orderItems:[],shippingInfo:void 0,computedTax:0,computedPlatformFee:0,computedTotal:0,productSurcharge:0});(0,r.useEffect)(()=>{!async function(){if(!I.address.line1||!I.address.city||!I.address.country||!_){L(0),E(0),D(0);return}try{var e;$(!0);let a=t.map(e=>({product_template_id:e.templateId,variant_id:e.variantId,quantity:e.quantity,price:e.price.toFixed(2),retail_price:e.price.toFixed(2)})),s={name:I.name,email:I.email,address1:I.address.line1,address2:I.address.line2,city:I.address.city,state_code:I.address.state,country_code:I.address.country,zip:I.address.postal_code},r=b?await (0,h.Jd)({shippingMethod:_.id,recipient:s,items:a,templateId:(null==(e=a[0])?void 0:e.product_template_id)||0}):await (0,h.BE)({shippingMethod:_.id,vendorUserId:String(l),recipient:s,items:a});L(Number(r.tax)||0),E(Number(r.platformFee)||0),D(Number(r.total)||0),R(Number(r.productSurcharge)||0),$(!1)}catch(e){L(0),E(0),D(0),R(0),$(!1)}}()},[I,_,t]);let V=(0,r.useCallback)(e=>{switch(e){case"cart":return"My Bag";case"checkout":return"Checkout";case"success":return"Order Complete";default:return""}},[]);(0,r.useEffect)(()=>{null==m||m(V(S))},[S,m,V]),(0,r.useEffect)(()=>{var e,a,s;if((null==I||null==(e=I.address)?void 0:e.line1)&&(null==I||null==(a=I.address)?void 0:a.city)&&(null==I||null==(s=I.address)?void 0:s.postal_code)&&(null==I?void 0:I.name)&&(null==I?void 0:I.email)&&_){let e=t.reduce((e,t)=>e+t.price*t.quantity,0);y.uk.addShippingInfo({items:t.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"})),shipping_tier:_.name,value:e})}},[I,_,t]);let U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0,r=H||t.reduce((e,t)=>e+t.price*t.quantity,0)+(_?Number.parseFloat(_.rate):0),i=e.length>0?e:t,n=s||Math.floor(1e6*Math.random());y.uk.addPaymentInfo({items:i.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"})),value:r,payment_type:"card"}),y.uk.purchase({id:n,total:r,tax:q||0,shipping:_?Number.parseFloat(_.rate):0,currency:"USD",items:i.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"}))}),O({orderItems:[...i],shippingInfo:I,computedTax:q,computedPlatformFee:M,computedTotal:H,productSurcharge:A}),s?T(s):T(n),setTimeout(()=>{x.A.removeLocalstorage("SHOP_CART_DATA:".concat(l)),a([]),k("success")},50)},Z=(e,a,s,r,i,l)=>{let n=l||H||t.reduce((e,t)=>e+t.price*t.quantity,0)+(s?Number.parseFloat(s.rate):0);y.uk.beginCheckout({items:t.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"})),total:t.reduce((e,t)=>e+t.price*t.quantity,0)}),y.uk.addShippingInfo({items:t.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"})),shipping_tier:(null==s?void 0:s.name)||(null==_?void 0:_.name)||"Express",value:n}),y.uk.addPaymentInfo({items:t.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"})),payment_type:"express",value:n}),O({orderItems:[...t],shippingInfo:a||I,computedTax:r||q,computedPlatformFee:i||M,computedTotal:l||H,productSurcharge:A}),s&&P(s),T(e),k("success")};return(0,s.jsx)("div",{className:"flex flex-1 h-full w-full px-4 pb-8 lg:p-0",children:(0,s.jsx)(d.e,{appear:!0,show:!0,as:r.Fragment,enter:"transition-opacity transform duration-300",enterFrom:"opacity-0 scale-90",enterTo:"opacity-100 scale-100",leave:"transition-opacity transform duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-90",children:(0,s.jsx)("div",{className:"flex flex-1",children:(()=>{switch(S){case"cart":return(0,s.jsx)(c,{stripeAccountId:w,children:(0,s.jsx)(g,{cartItems:t,setCartItems:a,vendorUserId:l,onClose:i,theme:n,onRemoveItem:o,onProceedToShipping:()=>{y.uk.beginCheckout({items:t.map(e=>({id:e.variantId,name:e.templateTitle||e.productTitle||e.variantName,price:e.price,quantity:e.quantity,category:"merchandise"})),total:t.reduce((e,t)=>e+t.price*t.quantity,0)}),k("checkout")},onNext:Z,onOpenPrivacyModal:u,onOpenTermsModal:p,onOpenReturnPolicyModal:j,isSample:b})});case"checkout":return(0,s.jsx)(c,{theme:n,stripeAccountId:w,children:(0,s.jsxs)("div",{className:"relative flex flex-1 lg:gap-8",children:[(0,s.jsxs)("div",{className:"flex lg:flex-[6] lg:border-r lg:overflow-auto border-gray-300 lg:pr-8 flex-col gap-6",children:[(0,s.jsx)(N,{cartItems:t,shipping:I,setShipping:C,shippingRate:_,setShippingRate:P,onBack:()=>k("cart"),onNext:()=>k("checkout"),theme:n,isCalculatingCosts:B,isSample:b}),(0,s.jsx)(v,{cartItems:t,shipping:I,shippingRate:_,vendorUserId:l,onSuccess:U,onBack:()=>k("cart"),theme:n,computedTax:q,computedPlatformFee:M,computedTotal:H,productSurcharge:A,onOpenPrivacyModal:u,onOpenTermsModal:p,onOpenReturnPolicyModal:j,isSample:b,isCalculatingCosts:B})]}),(0,s.jsx)("div",{className:"lg:flex-[4]"})]})});case"success":return(0,s.jsx)(f,{orderId:F||0,theme:n,shippingRate:_,computedTax:z.computedTax||0,computedPlatformFee:z.computedPlatformFee||0,computedTotal:z.computedTotal||0,productSurcharge:z.productSurcharge||0,onClose:i,orderItems:z.orderItems,shippingInfo:z.shippingInfo});default:return null}})()})})})}},67642:(e,t,a)=>{a.d(t,{O:()=>i});var s=a(61902),r=a(14232);let i=e=>{let t=(0,s.useElements)(),[a,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t&&e&&(i(!0),t.update({amount:Math.round(100*e),mode:"payment",currency:"usd"}),setTimeout(()=>{i(!1)},1e3))},[t,e]),a}},82708:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(14232);let r=function(e,t){let[a,r]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}}}]);