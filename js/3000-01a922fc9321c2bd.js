"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3e3],{3641:(e,t,l)=>{l.d(t,{Gy:()=>o,Ye:()=>a,eI:()=>d,p4:()=>r});var s=l(78567),n=l(54040);let i=s.A.config.apiEndpoints.engagement,a=async(e,t)=>{let l="".concat(i,"/engagement/api/v1/likes/post"),s=new FormData;return s.append("entityId",e),s.append("entityType","shout"),t||s.append("dislike","1"),new Promise((e,t)=>{(0,n.rU)(l,s).then(t=>{e((null==t?void 0:t.response)||null)}).catch(t)})},r=async e=>{let t="".concat(i,"/engagement/api/v1/comment/list?page=1&sort=Most Recent&limit=10&shoutId=").concat(e);return new Promise((e,l)=>{(0,n.HU)(t).then(t=>{e((null==t?void 0:t.response)||null)}).catch(l)})},o=async(e,t)=>{let l="".concat(i,"/engagement/api/v1/comment"),s=new FormData;return s.append("shoutId",e),s.append("comment",t),new Promise((e,t)=>{(0,n.rU)(l,s).then(t=>{e((null==t?void 0:t.response)||null)}).catch(t)})},d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l="".concat(i,"/engagement/api/v1/likes/list?entityType=shout&entityId=").concat(e,"&page=").concat(t);return new Promise((e,t)=>{(0,n.HU)(l).then(t=>{var l;e((null==t||null==(l=t.response)?void 0:l.list)||[])}).catch(t)})}},53e3:(e,t,l)=>{l.r(t),l.d(t,{default:()=>C});var s=l(37876),n=l(18847),i=l.n(n),a=l(14232),r=l(42155),o=l(55451),d=l(5897),c=l(52289),u=l(95947),m=l(54143),h=l(11281);let v=e=>{let{size:t="large",dynamicLink:l=""}=e,{isMobile:n}=(0,a.useContext)(m.y1),i=(0,a.useMemo)(()=>n?l:h.b.AUTH.SIGNUP,[n,l]);return(0,s.jsxs)("div",{className:"locked-content-overlay ".concat("large"===t?"locked-content-overlay-bg":"locked-content-overlay-bg-media"),children:[(0,s.jsx)("img",{src:"/images/lockIcon.png",className:"large"===t?"lock-icon":"lock-icon-small mt-2",alt:"lockIcon"}),(0,s.jsx)("div",{className:"".concat("large"===t?"text-[12px] mt-1":"text-[10px]"," font-[500] text-[#fff]"),children:"Join Linkme to View This Content"}),i?(0,s.jsx)("a",{href:i,className:"bg-[#ffffff40] rounded-[25px] ".concat("large"===t?"w-[55%] h-[35px]":"w-[72%] h-[30px]"," flex items-center justify-center cursor-pointer"),children:(0,s.jsx)("div",{className:"".concat("large"===t?"text-[12px]":"text-[10px]"," font-[500] text-[#fff]"),children:"Join Linkme for FREE"})}):null]})};var p=l(22117),x=l(58070),g=l(3641),j=l(89099);let f=()=>(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9 3.2386C7.23612 1.8029 4.6323 1.93951 2.9339 3.59259C1.06613 5.31037 1.08775 8.15838 2.92537 9.95567L2.92725 9.9575L8.58335 15.5823C8.80684 15.8045 9.16672 15.8061 9.39221 15.5858L15.1465 9.96379C17.0147 8.24541 16.9924 5.39619 15.153 3.59907C13.4444 1.92979 10.8378 1.80963 9 3.2386Z",fill:"url(#paint0_linear_16504_52280)"}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"paint0_linear_16504_52280",x1:"1.5",y1:"2.25",x2:"1.5",y2:"15.75",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{"stop-color":"#F40076"}),(0,s.jsx)("stop",{offset:"1","stop-color":"#DF98FA"})]})})]}),N=()=>(0,s.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",fill:"none",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"paint0_linear_16504_52280",x1:"1.5",y1:"2.25",x2:"1.5",y2:"15.75",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"#F40076"}),(0,s.jsx)("stop",{offset:"1",stopColor:"#DF98FA"})]})}),(0,s.jsx)("path",{d:" M9 16.2 L2.6 9.9 C0.7 7.9 0.7 4.9 2.6 3.0 C4.4 1.2 7.2 1.2 9 3.0 C10.8 1.2 13.6 1.2 15.4 3.0 C17.3 4.9 17.3 7.9 15.4 9.9 L9 16.2 Z",stroke:"url(#paint0_linear_16504_52280)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),y=i()(()=>l.e(2194).then(l.bind(l,72194)),{loadableGenerated:{webpack:()=>[72194]}}),w=e=>{var t,l;let{shouts:n,loading:i,profile:r,setEngagementModalData:o,dynamicLink:c,onOpenComments:m}=e,{current:h,toggleMute:v,forceStopPlayback:p,muted:g}=(0,u.a)(),{isLoggedIn:j}=(0,x.Z2)(),f=()=>{v("visible"!==document.visibilityState)};(0,a.useEffect)(()=>(document.addEventListener("visibilitychange",f),()=>document.removeEventListener("visibilitychange",f)),[]);let N=null==n||null==(l=n.sort((e,t)=>{var l,s;return(null==t||null==(l=t.data)?void 0:l.createdAt)-(null==e||null==(s=e.data)?void 0:s.createdAt)}).filter(e=>{var t,l;return(null==e||null==(t=e.data)?void 0:t.type)==="image"||(null==e||null==(l=e.data)?void 0:l.type)==="video"})[0])||null==(t=l.data)?void 0:t.id;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"item",children:(0,s.jsx)("div",{className:"shoutsTabDetails",children:i||(null==n?void 0:n.length)&&0!=n.length?i?(0,s.jsxs)(d.A,{className:"singleShoutList bgPrimarySurface boxShadow-2 pb-15px testShoutShimmerItem",children:[(0,s.jsx)("div",{className:"listHeader",children:(0,s.jsxs)("div",{className:"userDetailsPart",children:[(0,s.jsx)("div",{className:"userImage",children:(0,s.jsx)(d.A,{style:{width:"64px",height:"64px"}})}),(0,s.jsxs)("div",{className:"userDetails",children:[(0,s.jsx)("div",{className:"profileName",children:(0,s.jsx)(d.A,{className:"w-100 h-10px br-10px"})}),(0,s.jsx)(d.A,{className:"w-80 h-10px br-10px mt-5px"})]})]})}),(0,s.jsxs)("div",{className:"listBody",children:[(0,s.jsx)(d.A,{className:"w-100 h-10px br-10px mt-15px"}),(0,s.jsx)(d.A,{className:"w-90 h-10px br-10px mt-5px"})]})]}):n.map((e,t)=>(null==e?void 0:e.data)?(0,s.jsx)(S,{index:t,shout:e.data,current:h,forceStopPlayback:p,muted:g,setEngagementModalData:o,profile:r,latestShoutId:N,dynamicLink:c,onOpenComments:m,isLatestShout:e.data.id===N},t):null):(0,s.jsx)(P,{title:"No Shouts yet!",description:"Shouts posted by ".concat(r.firstName," ").concat(null==r?void 0:r.lastName," will appear here")})})})})},S=e=>{var t,l,n,i,r,d,u,m,h,g,f,N,w,S;let{index:E,shout:P,current:C,forceStopPlayback:A,muted:M,setEngagementModalData:I,profile:_,latestShoutId:D,dynamicLink:T,onOpenComments:F,isLatestShout:H}=e,R=(0,a.useRef)(null),[U,G]=(0,a.useState)(!1),[O,Z]=(0,a.useState)(!1),[B,W]=(0,a.useState)({}),[V,z]=(0,a.useState)(),{isLoggedIn:J}=(0,x.Z2)();(0,a.useEffect)(()=>{if(!U){let e=R.current;e&&Z(e.clientHeight<e.scrollHeight)}},[U]);let Y=null!=(N=null==P||null==(l=P.description)||null==(t=l.match(/https?:\/\/[^\s]+/))?void 0:t[0])?N:"";(0,a.useEffect)(()=>{Y&&(0,p.aZ)({url:Y}).then(e=>{W(e)})},[Y]);let X="text"==P.type;(0,j.useRouter)();let q=P.media&&(P.media.webp||P.media.url),K=(null==(n=P.media)?void 0:n.webp)||(null==(i=P.media)?void 0:i.url)||"",Q=!J&&!H;return(0,s.jsxs)("div",{className:"singleShoutList bgPrimarySurface boxShadow-2",children:[(0,s.jsx)(k,{shout:P}),(0,s.jsxs)("div",{className:"listBody onPrimaryMain",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{ref:R,className:"description ".concat(U?"":X?"collapsed-4":"collapsed-1"),dangerouslySetInnerHTML:{__html:c.A.generateLinks(P.description)}}),O&&(0,s.jsx)("span",{className:"onPrimaryL2",onClick:()=>G(!U),children:U?"Show less":"Show more"})]}),(null==P?void 0:P.poll)?(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"poll-options-wrapper",children:null==P||null==(d=P.poll)||null==(r=d.options)?void 0:r.map((e,t)=>{var l,n,i;return(0,s.jsxs)("div",{className:"poll-option ".concat((null==P||null==(l=P.poll)?void 0:l.isExpired)?"poll-option-expired":""),onClick:()=>{I({is_open:!0,icon:"dummy/poll",title:"Sign up to Linkme to vote now",text:"Join Linkme and vote on ".concat(null==_?void 0:_.firstName,"'s Shout.")})},children:[(null==P||null==(n=P.poll)?void 0:n.isExpired)&&(0,s.jsx)("div",{className:"poll-filled",style:{width:"".concat(parseInt(null==e?void 0:e.votePercent),"%")}}),(null==P||null==(i=P.poll)?void 0:i.isExpired)?(0,s.jsxs)("div",{className:"flex justify-between w-full px-4",children:[(0,s.jsx)("div",{className:"poll-content w-[80%]",children:null==e?void 0:e.content}),(0,s.jsx)("div",{children:null==e?void 0:e.votePercent})]}):(0,s.jsx)("div",{className:"w-full px-4",children:(0,s.jsx)("div",{className:"poll-content w-full text-center",children:null==e?void 0:e.content})})]},"poll-".concat(t))})}),(0,s.jsxs)("div",{className:"mt-5 poll-results-text",children:[null==P||null==(u=P.poll)?void 0:u.totalVotes," Votes â€¢ ",null==P||null==(m=P.poll)?void 0:m.timeLeft]})]}):null,(null==B?void 0:B.title)&&(0,s.jsxs)("div",{className:"meta-tag-container",children:[(0,s.jsx)("img",{src:null!=(w=B.image)?w:"",className:"meta-tag-image",alt:"meta"}),(0,s.jsxs)("div",{className:"px-5 py-3",children:[(0,s.jsx)("div",{className:"meta-tag-title",children:B.title}),(0,s.jsx)("p",{className:"meta-tag-url",children:Y&&null!=(S=null==(h=Y.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n]+)/im))?void 0:h[1])?S:""})]})]}),q&&(0,s.jsxs)("div",{className:"imageinclude relative",children:[Q?(0,s.jsx)(v,{dynamicLink:T}):null,(0,s.jsxs)("div",{className:Q?"blurred-content w-full h-full":"w-full h-full",children:[(null==(g=P.media)?void 0:g.type)==="video"&&!Q&&(0,s.jsx)(y,{shout:P,current:C,forceStopPlayback:A,muted:M}),(null==(f=P.media)?void 0:f.type)==="image"&&K&&!Q&&(0,s.jsx)("div",{className:"max-h-[546px]",children:(0,s.jsx)(o.A,{src:K,progressive:!0,alt:"Media",width:1e3})}),Q&&(0,s.jsx)(o.A,{src:"/images/randomImage".concat(E+1,".webp"),isPlaceholder:!0,nextImage:!0,width:524,height:688})]})]}),P.parentShoutData&&(0,s.jsx)(b,{shout:P.parentShoutData,childShoutId:P.id,current:C,forceStopPlayback:A,muted:M,setEngagementModalData:I,profile:_})]}),(0,s.jsx)(L,{shout:P,setEngagementModalData:I,profile:_,onOpenComments:F})]})},L=e=>{let{shout:t,setEngagementModalData:l,profile:n,onOpenComments:i}=e,{isLoggedIn:r,userInfo:o}=(0,x.Z2)(),[d,c]=(0,a.useState)(t.totalLikes),[u,m]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!1),[p,y]=(0,a.useState)(t.totalComments||0);return(0,j.useRouter)(),(0,a.useEffect)(()=>{r&&t.id&&(0,g.p4)(t.id).then(e=>{var t;y((null==e||null==(t=e.list)?void 0:t.length)||0)})},[r,t.id]),(0,a.useEffect)(()=>{r&&(t.id&&(null==o?void 0:o.id)?(0,g.eI)(t.id).then(e=>{e.length!=d&&c(e.length),m(e.some(e=>e.id===o.id))}):m(!1))},[r,t.id,null==o?void 0:o.id]),(0,s.jsxs)("div",{className:"listFooter",children:[(0,s.jsxs)("div",{className:"singleAction",onClick:()=>{r?i&&i(t.id):l({is_open:!0,icon:"dummy/message",title:"Leave a comment, join the conversation! ",text:"Join Linkme and reply to ".concat(null==n?void 0:n.firstName,"'s Shout.")})},children:[(0,s.jsx)("img",{src:"/dummy/message.svg",alt:"Message"}),(0,s.jsx)("span",{className:"onPrimaryL2",children:p})]}),(0,s.jsxs)("div",{className:"singleAction",onClick:()=>l({is_open:!0,icon:"dummy/reshout",title:"Shout-out, Spread the word!",text:"When you join Linkme, you'll be able to Shout-out."}),children:[(0,s.jsx)("img",{src:"/dummy/reshout.svg",alt:"ReShout"}),(0,s.jsx)("span",{className:"onPrimaryL2",children:t.reShoutCount})]}),(0,s.jsxs)("div",{className:"singleAction",onClick:()=>{r?h||(v(!0),(0,g.Ye)(t.id,!u).then(e=>{(0,g.eI)(t.id).then(e=>{c(e.length),m(e.some(e=>e.id===o.id))})}).catch(e=>{}).finally(()=>v(!1))):l({is_open:!0,icon:"dummy/like",title:"Like a Shout to show love.",text:"Join Linkme to like ".concat(null==n?void 0:n.firstName,"'s Shout")})},style:{color:"hotpink"},children:[u?(0,s.jsx)(f,{}):(0,s.jsx)(N,{}),(0,s.jsx)("span",{className:"onPrimaryL2 min-w-[1rem] text-center",children:d})]}),(0,s.jsxs)("div",{className:"singleAction",children:[(0,s.jsx)("img",{src:"/dummy/views.svg",alt:"Views"}),(0,s.jsx)("span",{className:"onPrimaryL2",children:t.viewCount})]}),(0,s.jsxs)("div",{className:"singleAction",onClick:()=>l({is_open:!0,icon:"dummy/link",title:"Link with ".concat(null==n?void 0:n.firstName," to see their Shouts."),text:"Sign up so you never miss a Shout!"}),children:[(0,s.jsx)("img",{src:"/dummy/link.svg",alt:"Link"}),(0,s.jsx)("span",{className:"onPrimaryL2"})]}),(0,s.jsxs)("div",{className:"singleAction",onClick:()=>l({is_open:!0,icon:"dummy/shareShout",title:"Share a Shout",text:"Download Linkme and setup your account to share Shouts"}),children:[(0,s.jsx)("img",{src:"/dummy/share.svg",alt:"Share"}),(0,s.jsx)("span",{className:"onPrimaryL2"})]})]})},k=e=>{var t,l;let{shout:n}=e;return(0,s.jsx)("div",{className:"listHeader",children:(0,s.jsxs)("div",{className:"userDetailsPart",children:[(0,s.jsx)("div",{className:"userImage",children:(0,s.jsx)(o.A,{src:c.A.getProfilePicturePath(n.user),alt:"Profile",nextImage:!0,width:64,height:64})}),(0,s.jsxs)("div",{className:"userDetails",children:[(0,s.jsxs)("div",{className:"profileName",children:[(0,s.jsxs)("div",{className:"onPrimaryMain",children:[n.user.firstName," ",n.user.lastName]}),1==n.user.verifiedAccount&&(0,s.jsx)("img",{className:"ms-1",src:c.A.getVerifyIconPath(null==n||null==(l=n.user)||null==(t=l.customisedTheme)?void 0:t.verifiedIcon),alt:"Verified"})]}),(0,s.jsxs)("div",{className:"userName onPrimaryL2",children:["@",n.user.username]})]})]})})},b=e=>{var t,l,n,i,r,d,u,m,h,v,g,j;let{shout:f,childShoutId:N,current:w,forceStopPlayback:S,muted:b,setEngagementModalData:E,profile:P}=e,{isLoggedIn:C}=(0,x.Z2)(),[A,M]=(0,a.useState)({}),I=null!=(v=null==f||null==(l=f.description)||null==(t=l.match(/https?:\/\/[^\s]+/))?void 0:t[0])?v:"",[_,D]=(0,a.useState)();(0,a.useEffect)(()=>{I&&(0,p.aZ)({url:I}).then(e=>{M(e)})},[I]);let T=f.media&&(f.media.webp||f.media.url),F=(null==(n=f.media)?void 0:n.webp)||(null==(i=f.media)?void 0:i.url)||"";return(0,s.jsx)("div",{className:"reshoutmaindiv bgGradient-5",children:(0,s.jsx)("div",{className:"reshoutsubmaindiv bgGradient",children:(0,s.jsxs)("div",{className:"singleShoutList bgGradient-4",children:[(0,s.jsx)(k,{shout:f}),(0,s.jsxs)("div",{className:"listBody onPrimaryMain",children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:c.A.generateLinks(f.description)}}),(null==A?void 0:A.title)&&(0,s.jsxs)("div",{className:"meta-tag-container",children:[(0,s.jsx)("img",{src:null!=(g=null==A?void 0:A.image)?g:"",className:"meta-tag-image",alt:"meta"}),(0,s.jsxs)("div",{className:"px-5 py-3",children:[(0,s.jsx)("div",{className:"meta-tag-title",children:null==A?void 0:A.title}),(0,s.jsx)("p",{className:"meta-tag-url",children:I&&null!=(j=null==(r=I.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n]+)/im))?void 0:r[1])?j:""})]})]}),T&&(0,s.jsxs)("div",{className:"imageinclude",children:[(null==(d=f.media)?void 0:d.type)==="video"&&(null==(u=f.media)?void 0:u.thumbnail)&&C&&(0,s.jsx)(y,{shout:f,childShoutId:N,current:w,forceStopPlayback:S,muted:b}),(null==(m=f.media)?void 0:m.type)==="image"&&F&&(0,s.jsx)("div",{style:{maxHeight:"546px"},children:(0,s.jsx)(o.A,{src:F,style:{maxHeight:"546px"},progressive:!0,alt:"Media",width:(null==(h=f.media)?void 0:h.width)||1e3})})]})]}),(0,s.jsx)(L,{shout:f,setEngagementModalData:E,profile:P})]})})})},E=e=>{let{media:t,loading:l,profile:n,dynamicLink:i}=e,{isLoggedIn:a}=(0,x.Z2)(),{current:r,forceStopPlayback:m,muted:h}=(0,u.a)(),p=!a;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"item",children:(0,s.jsx)("div",{className:"mediaTabDetails",children:l||(null==t?void 0:t.length)&&0!=t.length?l?[void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"singlemedialist noAfterBg",children:(0,s.jsx)(d.A,{className:"w-100 h-100"})},"media-shimmer-"+t)):t.map((e,l)=>{var n,a,d,u,x,g,j,f,N,w,S,L,k;let b=c.A.getImageUrl({src:(null==e||null==(a=e.data)||null==(n=a.media)?void 0:n.url)||(null==e||null==(u=e.data)||null==(d=u.media)?void 0:d.webp)}),E=p&&t.length>1&&0!==l;if(null==e?void 0:e.data)return(0,s.jsxs)("div",{className:"singlemedialist",children:[E?(0,s.jsx)(v,{size:"small",dynamicLink:i}):null,(0,s.jsxs)("div",{className:E?"blurred-content w-full h-full":"w-full h-full",children:[(null==e||null==(g=e.data)||null==(x=g.media)?void 0:x.type)==="video"&&!E&&(0,s.jsx)(y,{shout:null==e?void 0:e.data,childShoutId:null==e||null==(j=e.data)?void 0:j.id,current:r,forceStopPlayback:m,muted:h}),(null==e||null==(N=e.data)||null==(f=N.media)?void 0:f.type)==="video"&&E&&(0,s.jsx)(o.A,{src:c.A.getImageUrl({src:(null==e||null==(S=e.data)||null==(w=S.media)?void 0:w.thumbnail)||b}),isPlaceholder:!0,alt:"Locked Media",nextImage:!0,width:264,height:400}),(null==e||null==(k=e.data)||null==(L=k.media)?void 0:L.type)==="image"&&(0,s.jsx)(o.A,{src:b,isPlaceholder:!0,alt:"Media",nextImage:!0,width:264,height:400})]}),(0,s.jsxs)("div",{className:"details",children:[(0,s.jsx)("p",{className:"first colorWhite",dangerouslySetInnerHTML:{__html:c.A.generateLinks(e.data.description)}}),(0,s.jsx)("p",{className:"second colorWhite",children:e.data._time})]})]},"media-"+l)}):(0,s.jsx)(P,{title:"No Media yet!",description:"Shouts with media posted by ".concat(n.firstName," ").concat(null==n?void 0:n.lastName," will\n    appear here")})})})})},P=e=>{let{title:t,description:l}=e;return(0,s.jsxs)("div",{className:"noshoutmediamaindiv",children:[(0,s.jsx)("div",{className:"imagenoshoutmedia",children:(0,s.jsx)("img",{src:"/images/noshoutmedia.png",alt:"NoMedia"})}),(0,s.jsx)("p",{className:"onPrimaryMain first",children:t}),(0,s.jsx)("p",{className:"onPrimaryMain second",children:l})]})},C=e=>{let{profile:t,setEngagementModalData:l,onOpenComments:n}=e,i=(0,a.useMemo)(()=>["shout","media"],[]),[o,d]=(0,a.useState)(i[0]),c=(0,a.useRef)(o),[h,v]=(0,a.useState)([]),[p,x]=(0,a.useState)([]),[g,f]=(0,a.useState)({shouts:!0,media:!0}),N=(0,a.useRef)(null),{dragging:y,propagate:S}=(e=>{let[t,l]=(0,a.useState)(!0),[s,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)(0),[o,d]=(0,a.useState)(0),c=e=>{s||(e.stopPropagation(),n(!0),r(e.clientX),d(e.clientY),e.preventDefault())},u=t=>{if(s){let s=e.current;s&&(t.stopPropagation(),l(!1),s.scrollLeft-=-i+t.clientX,s.scrollTop-=-o+t.clientY,r(t.clientX),d(t.clientY))}},m=e=>{s&&(e.stopPropagation(),n(!1)),setTimeout(()=>l(!0),100)},h=e=>{t||(e.stopPropagation(),l(!0))},v=e=>{},p=e=>{};return(0,a.useEffect)(()=>{var t,l,s,n,i,a;return null==(t=e.current)||t.addEventListener("mousedown",c),null==(l=e.current)||l.addEventListener("mousemove",u),null==(s=e.current)||s.addEventListener("mouseup",m),null==(n=e.current)||n.addEventListener("touchstart",v),null==(i=e.current)||i.addEventListener("touchend",p),null==(a=e.current)||a.addEventListener("click",h),window.addEventListener("mouseup",m),()=>{var t,l,s,n,i,a;null==(t=e.current)||t.removeEventListener("mousedown",c),null==(l=e.current)||l.removeEventListener("mousemove",u),null==(s=e.current)||s.removeEventListener("mouseup",m),null==(n=e.current)||n.removeEventListener("touchstart",v),null==(i=e.current)||i.removeEventListener("touchend",p),null==(a=e.current)||a.removeEventListener("click",h),window.removeEventListener("mouseup",m)}}),{dragging:s,propagate:t}})(N),{stopPlayback:L}=(0,u.a)(),[k,b]=(0,a.useState)(0),{isTouch:P}=(0,a.useContext)(m.y1),[C,A]=(0,a.useState)("");(0,j.useRouter)(),(0,a.useEffect)(()=>{(0,r.Gz)(null==t?void 0:t.id).then(e=>{A((null==e?void 0:e.referralLink)||"")})},[t]),(0,a.useEffect)(()=>{y||M()},[y]);let M=()=>{let e=N.current;if(e){let t=e.scrollWidth,l=e.scrollLeft,s=e.firstElementChild.childElementCount,n=t/s,a=0,r=0,c=[];for(let e=0;e<s;e++)c.push(e*n);for(let e=0;e<c.length-1;e++){let t=c[e],s=c[e+1];if(l>=.9*t&&l<=s+.9*n){let d=i.indexOf(o),c=d*n;l>=c?l>c+.1*n?(a=s,r=e+1):(a=d*n,r=d):l<c-.1*n?(a=t,r=e):(a=d*n,r=d);break}}e.scroll({behavior:"smooth",left:a}),d(i[r]),L(0!=r),_(r)}},I=e=>{let t=N.current;if(t){let l=t.scrollWidth,s=t.firstElementChild.childElementCount;t.scroll({behavior:"smooth",left:l/s*e}),d(i[e]),L(0!=e),_(e)}},_=e=>{let t=N.current;t&&b(20+t.children[0].children[e].children[0].clientHeight)};(0,a.useEffect)(()=>{let e=new ResizeObserver(()=>{o==i[0]&&_(0)}),t=new ResizeObserver(()=>{o==i[1]&&_(1)}),l=document.querySelector(".shoutsTabDetails");l&&e.observe(l);let s=document.querySelector(".mediaTabDetails");return s&&t.observe(s),()=>{e.disconnect(),t.disconnect()}},[]),(0,a.useEffect)(()=>{c.current=o},[o]);let D=(0,a.useRef)(null),T=()=>{D.current&&(clearTimeout(D.current),D.current=null),D.current=setTimeout(()=>{let e=N.current;if(e){let t=e.scrollWidth,l=e.scrollLeft,s=e.firstElementChild.childElementCount,n=t/s,a=0;for(let e=0;e<s;e++){let t=e*n;if(l>=t-1&&l<=t+1){a=e;break}}a!=i.indexOf(c.current)&&(d(i[a]),L(0!=a),_(a))}},100)};(0,a.useEffect)(()=>{if(m.CN){var e;null==(e=N.current)||e.addEventListener("scroll",T,!0)}return()=>{if(m.CN){var e;null==(e=N.current)||e.removeEventListener("scroll",T)}}},[]),(0,a.useEffect)(()=>{"lockhub"==t.username||"watches"==t.username?f(e=>({shouts:!1,media:!1})):((0,r.Lz)(t.id).then(e=>{v((null==e?void 0:e.list)||[]),f(e=>({...e,shouts:!1}))}),(0,r.xM)(t.id).then(e=>{x((null==e?void 0:e.list)||[]),f(e=>({...e,media:!1}))}))},[t.id,t.username]);let F=(null==t?void 0:t.subscriptionFeature)==="linkme_pro";return"watches"==t.username||F&&0===h.length&&0===p.length?null:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"shoutsTabMainDiv",children:[(0,s.jsxs)("div",{className:"menuList",children:[(0,s.jsx)("p",{className:"testMenuItem shoutmenushow onPrimaryL1 ".concat(o==i[0]&&"active onPrimaryMain"),onClick:()=>I(0),children:"Shouts"}),(0,s.jsx)("p",{className:"testMenuItem mediamenushow onPrimaryL1 ".concat(o==i[1]&&"active onPrimaryMain"),onClick:()=>I(1),children:"Media"})]}),(0,s.jsx)("div",{className:"menuDetailsMainDiv noScrollBar",ref:N,style:{height:0===k?"unset":"".concat(k,"px"),overflowX:P?"auto":"hidden",scrollSnapType:P?"x mandatory":"",transition:P?"":"height 1s linear"},children:(0,s.jsxs)("div",{className:"flex ".concat(S?"":"pointer-events-none"),children:[(0,s.jsx)(w,{shouts:h,loading:g.shouts,profile:t,setEngagementModalData:l,dynamicLink:C,onOpenComments:n}),(0,s.jsx)(E,{media:p,loading:g.media,profile:t,dynamicLink:C})]})})]})})}}}]);