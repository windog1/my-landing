"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5522],{3346:(e,t,a)=>{a.d(t,{A:()=>F});var s=a(37876),r=a(14232),l=a(14e3),i=a(83779),n=a(48156),o=a(52289),c=a(55451),d=a(61862);function m(e){let{product:t,onSelect:a,webTheme:r}=e,l="light"===r,i=t.thumbnailUrl||o.A.getImageUrl({src:"/images/digital-product-placeholder.png",w:400});return(0,s.jsxs)("div",{className:"product-details cursor-pointer",onClick:()=>a(t),children:[(0,s.jsxs)("div",{className:"product-image-container relative",children:[(0,s.jsx)(c.A,{src:i,alt:t.title,style:{objectFit:"cover"}}),(0,s.jsx)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-70 rounded-full p-2",children:(0,s.jsx)("span",{className:"text-white text-xl",children:d.f[t.fileType]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"product-name ".concat(l?"!text-[#000]":"!text-[#fff]"),children:t.title}),(0,s.jsxs)("div",{className:"product-price mt-2 ".concat(l?"!text-gray-800":"!text-gray-400"),children:["$",t.price.toFixed(2)]})]})]})}var u=a(5797),x=a(86066),h=a(28823),p=a(11187),g=a(27212),f=a(61902),v=a(4241),y=a(78567);let j=y.A.config.stripePublicKey;function b(e){let{amount:t,children:a,stripeAccountId:l}=e,{theme:i}=(0,n.eP)(),o=(0,r.useMemo)(()=>j?l?(0,v.c)(j,{stripeAccount:l}):(0,v.c)(j):null,[l]),c={mode:"payment",amount:Math.round(100*t),currency:"usd",appearance:{theme:"stripe",variables:{colorPrimary:"#000000",colorBackground:"#ffffff",colorText:"#000000",colorDanger:"#df1b41",fontFamily:"Ideal Sans, system-ui, sans-serif",borderRadius:"8px"},rules:{".Tab":{borderRadius:"12px",border:"dark"===i?"1px solid #374151":"1px solid #e5e7eb",backgroundColor:"dark"===i?"#111827":"#f9fafb"},".Tab:hover":{backgroundColor:"dark"===i?"#1f2937":"#f3f4f6"},".Tab--selected":{backgroundColor:"dark"===i?"#374151":"#e5e7eb",border:"dark"===i?"1px solid #4b5563":"1px solid #d1d5db"},".Input":{borderRadius:"12px",border:"dark"===i?"1px solid #374151":"1px solid #e5e7eb",backgroundColor:"dark"===i?"#111827":"#ffffff"},".Input:focus":{border:"dark"===i?"1px solid #6b7280":"1px solid #9ca3af"}}}};return o?(0,s.jsx)(f.Elements,{stripe:o,options:c,children:a}):(0,s.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm",children:"Payment system is not configured. Please contact support."})})}let N=y.A.config.stripePublicKey;function w(e){let{clientSecret:t,children:a,stripeAccountId:l}=e,i=(0,r.useMemo)(()=>N?l?(0,v.c)(N,{stripeAccount:l}):(0,v.c)(N):null,[l]);return i?(0,s.jsx)(f.Elements,{stripe:i,options:{clientSecret:t,appearance:{theme:"stripe"}},children:a}):(0,s.jsx)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm",children:"Payment system is not configured. Please contact support."})})}var k=a(58070),I=a(3280),S=a(5897),P=a(67642);function C(e){let{product:t,profile:a,onStepChange:l,onOrderInitialized:n,onPaymentSuccess:m,onClose:u}=e,x=(0,f.useStripe)(),h=(0,f.useElements)(),{userInfo:g}=(0,k.Z2)(),[v,y]=(0,r.useState)(!1),[j,b]=(0,r.useState)(null),[N,w]=(0,r.useState)(!0),[C,A]=(0,r.useState)(!1),[T,E]=(0,r.useState)(!1),[L,z]=(0,r.useState)(null),_=(0,P.O)(t.price),M=async e=>{if(x&&h&&L){y(!0),b(null);try{var a;let s=null==(a=e.billingDetails)?void 0:a.email;if(!s){b("Email is required for digital product purchase"),y(!1);return}let r=await (0,i.Kk)({productId:t.id,buyerEmail:s});n({...r,buyerEmail:s});let{error:l,paymentIntent:o}=await x.confirmPayment({elements:h,clientSecret:r.clientSecret,confirmParams:{return_url:"".concat(window.location.origin,"/digital-products/checkout/success?orderId=").concat(r.orderId),receipt_email:s},redirect:"if_required"});l?b(l.message||"Payment failed"):o&&"succeeded"===o.status?m(r.orderId,r.amount):b("Payment requires additional verification. Please try again.")}catch(e){b(e.message||"Payment failed")}finally{y(!1)}}};return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto p-6 bg-white rounded-2xl",children:[(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("button",{onClick:u,className:"absolute right-0 top-0 p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close checkout",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Checkout"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Secure payment powered by Stripe"})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"relative flex-shrink-0",children:t.thumbnailUrl?(0,s.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:(0,s.jsx)(c.A,{src:t.thumbnailUrl,alt:t.title,layout:"fill",style:{objectFit:"cover"},className:"bg-white"})}):(0,s.jsx)("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:(0,s.jsx)("span",{className:"text-2xl text-gray-400",children:d.f[t.fileType]})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 text-sm truncate",children:t.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["Digital ",t.fileType]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.profileImage&&(0,s.jsx)(c.A,{src:o.A.getImageUrl({src:a.profileImage}),alt:a.username,width:20,height:20,className:"rounded-full"}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:["@",a.username]})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",t.price.toFixed(2)]})})]})}),j&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:j})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative ".concat(T&&C?"opacity-100":"opacity-0 h-0 overflow-hidden"),children:[(N||_)&&(0,s.jsx)("div",{className:"absolute inset-0 flex flex-col gap-2",children:(0,s.jsx)(S.A,{className:"h-[44px] rounded-lg"})}),(0,s.jsx)(f.ExpressCheckoutElement,{onClick:e=>{let{resolve:a}=e;z(t.price),a({emailRequired:!0})},onConfirm:M,options:{buttonHeight:48,paymentMethods:{applePay:"always",googlePay:/iPhone|iPad|iPod/.test(navigator.userAgent)?"never":"always",amazonPay:"auto",link:"auto"},buttonType:{applePay:"buy",googlePay:"buy"},paymentMethodOrder:["apple","google"]},onReady:e=>{if(w(!1),e){let t=e.availablePaymentMethods;A(t.applePay||t.googlePay||t.amazonPay),E(!0)}},className:"w-full ".concat(N||_?"pointer-events-none opacity-50":"")})]}),C&&(0,s.jsxs)("div",{className:"relative my-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs",children:(0,s.jsx)("span",{className:"px-3 bg-white text-gray-500",children:"or pay with card"})})]}),(0,s.jsx)(p.P.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>{l("card-payment")},disabled:v||_,className:"w-full px-6 py-3 rounded-lg font-medium transition-all ".concat(v||_?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-900 hover:bg-gray-800 text-white"),children:v?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Continue with Card"})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Secure checkout"})]}),(0,s.jsx)("p",{className:"text-center text-xs text-gray-500",children:"By continuing, you agree to our Terms of Service and Privacy Policy"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3 pt-2",children:[(0,s.jsx)(I.nL,{className:"h-8 opacity-40"}),(0,s.jsx)(I.uI,{className:"h-8 opacity-40"}),(0,s.jsx)(I.Nx,{className:"h-8 opacity-40"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"and more"})]})]})]})}var A=a(48230),T=a.n(A),E=a(11281);function L(e){let{product:t,profile:a,clientSecret:l,orderId:n,amount:m,buyerEmail:x,onStepChange:h,onOrderInitialized:p,onPaymentSuccess:g,onBack:v,onClose:y}=e,j=(0,f.useStripe)(),b=(0,f.useElements)(),{userInfo:N}=(0,k.Z2)(),[w,I]=(0,r.useState)(!1),[S,P]=(0,r.useState)(null),[C,A]=(0,r.useState)(x||""),[L,z]=(0,r.useState)(!1),_=!l||!n,M=async()=>{if(!C)return void P("Please enter your email address");z(!0),P(null);try{let e=await (0,i.Kk)({productId:t.id,buyerEmail:C});p({...e,buyerEmail:C})}catch(e){P(e.message||"It seems that the product is no longer available. Please try again later.")}finally{z(!1)}},B=async e=>{if(e.preventDefault(),j&&b&&l&&n&&m){I(!0),P(null);try{let{error:e}=await b.submit();if(e){P(e.message||"Payment validation failed."),I(!1);return}let{error:t,paymentIntent:a}=await j.confirmPayment({elements:b,clientSecret:l,confirmParams:{return_url:"".concat(window.location.origin,"/digital-products/checkout/success?orderId=").concat(n),payment_method_data:{billing_details:{email:C}}},redirect:"if_required"});t?P(t.message||"Payment failed"):a&&"succeeded"===a.status?g(n,m):P("Payment requires additional verification. Please try again.")}catch(e){P(e.message||"Payment failed")}finally{I(!1)}}};return(0,s.jsx)(u.e,{appear:!0,show:!0,enter:"transition ease-out duration-300",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl mx-auto p-6 bg-white rounded-2xl",children:[(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("button",{onClick:y,className:"absolute right-0 top-0 p-2 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close checkout",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsxs)("h2",{className:"text-2xl font-bold text-black",children:["Payment Method",(0,s.jsxs)("div",{className:"flex font-normal items-center text-gray-700 text-sm mt-2",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:[(0,s.jsx)("title",{children:"Secure lock icon"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})]}),"Secure Payment"]})]})]}),(0,s.jsxs)("div",{className:"lg:flex lg:gap-8",children:[(0,s.jsx)("div",{className:"lg:flex-1",children:_?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),(0,s.jsx)("input",{type:"email",id:"email",value:C,onChange:e=>A(e.target.value),placeholder:"your@email.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",required:!0}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"We'll send your digital product to this email"})]}),S&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:S})}),(0,s.jsx)("button",{onClick:M,disabled:L||!C,className:"w-full px-6 py-3 rounded-lg bg-gray-900 hover:bg-gray-800 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Continue to Payment"})]}):(0,s.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)(f.PaymentElement,{id:"payment-element",options:{layout:"tabs",defaultValues:C?{billingDetails:{email:C}}:void 0,fields:{billingDetails:{email:C?"never":"auto"}},terms:{card:"never"}}})}),S&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:S})]})}),(0,s.jsxs)("div",{className:"mt-8 lg:mt-0 lg:w-[36%]",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-black mb-4 lg:hidden",children:"Order Summary"}),(0,s.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"relative flex-shrink-0",children:t.thumbnailUrl?(0,s.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden",children:(0,s.jsx)(c.A,{src:t.thumbnailUrl,alt:t.title,layout:"fill",style:{objectFit:"cover"},className:"bg-white"})}):(0,s.jsx)("div",{className:"w-16 h-16 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:(0,s.jsx)("span",{className:"text-2xl text-gray-400",children:d.f[t.fileType]})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900 text-sm",children:t.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:["Digital ",t.fileType]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.profileImage&&(0,s.jsx)(c.A,{src:o.A.getImageUrl({src:a.profileImage}),alt:a.username,width:20,height:20,className:"rounded-full"}),(0,s.jsxs)("span",{className:"text-xs text-gray-600",children:["@",a.username]})]})]})]})}),(0,s.jsx)("div",{className:"text-right mt-4",children:(0,s.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:["$",t.price.toFixed(2)]})})]})]}),l&&(0,s.jsx)("div",{className:"mt-8 lg:flex lg:justify-between lg:items-end",children:(0,s.jsxs)("div",{className:"lg:flex-1 lg:max-w-[64%]",children:[(0,s.jsxs)("p",{className:"text-xs text-gray-700 mb-4",children:["By submitting your order, you agree to our"," ",(0,s.jsx)(T(),{href:E.b.TERMS,className:"underline",children:"Terms of Service"})," ","&"," ",(0,s.jsx)(T(),{href:E.b.PRIVACY,className:"underline",children:"Privacy Policy"}),"."]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:v,className:"px-6 py-3 rounded-lg bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:w||!j||!b,onClick:B,className:"flex-1 px-6 py-3 rounded-lg bg-gray-900 hover:bg-gray-800 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:w?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Pay Now"})]})]})})]})})}function z(e){let{product:t,profile:a,orderId:l,amount:i,onClose:n}=e;return(0,r.useEffect)(()=>{let e=setTimeout(()=>{n()},1e4);return()=>clearTimeout(e)},[n]),(0,s.jsxs)("div",{className:"relative w-full max-w-md mx-auto p-6 bg-white rounded-2xl text-center",children:[(0,s.jsx)(p.P.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5,bounce:.4},className:"mb-6",children:(0,s.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),(0,s.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Payment Successful!"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Thank you for your purchase. We've sent the download link to your email."})]}),(0,s.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gray-50 rounded-xl p-5 mb-6 text-left",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[t.thumbnailUrl?(0,s.jsx)("div",{className:"relative w-10 h-10 rounded-lg overflow-hidden flex-shrink-0",children:(0,s.jsx)("img",{src:t.thumbnailUrl,alt:t.title,className:"w-full h-full object-cover"})}):(0,s.jsx)("div",{className:"w-10 h-10 bg-white rounded-lg flex items-center justify-center border border-gray-200 flex-shrink-0",children:(0,s.jsx)("span",{className:"text-lg text-gray-400",children:d.f[t.fileType]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.title}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Digital ",t.fileType]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Order ID"}),(0,s.jsxs)("span",{className:"text-gray-900 font-mono",children:["#",l]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Amount Paid"}),(0,s.jsxs)("span",{className:"text-gray-900 font-semibold",children:["$",(i/100).toFixed(2)]})]})]})]})]}),(0,s.jsxs)(p.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"What happens next?"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 text-left",children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"You'll receive an email with your download link"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"The link will be valid for 7 days"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"You can download the file up to 5 times"})]})]})]}),(0,s.jsxs)(p.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"space-y-3",children:[(0,s.jsx)("button",{onClick:n,className:"w-full px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white font-medium rounded-lg transition-colors",children:"Done"}),(0,s.jsx)("button",{onClick:()=>window.location.href="/".concat(a.username,"/digital-products"),className:"w-full px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:"Browse More Products"})]}),(0,s.jsx)(p.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1},className:"text-xs text-gray-500 mt-4",children:"This window will close automatically in a few seconds"})]})}function _(e){var t;let{product:a,profile:l,onClose:i}=e,[n,o]=(0,r.useState)("payment-options"),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[x,h]=(0,r.useState)(0),[p,g]=(0,r.useState)(0),[f,v]=(0,r.useState)(null),y=null==l||null==(t=l.stripeStatus)?void 0:t.stripeAccountId,j=e=>{o(e)},N=e=>{d(e.orderId),u(e.clientSecret),h(e.amount),e.buyerEmail&&v(e.buyerEmail),g(e=>e+1)},k=(e,t)=>{d(e),h(t),o("success")},I=(0,s.jsx)("div",{className:"relative min-h-[500px] flex items-center justify-center",children:(()=>{switch(n){case"payment-options":return(0,s.jsx)(C,{product:a,profile:l,onStepChange:j,onOrderInitialized:N,onPaymentSuccess:k,onClose:i});case"card-payment":return(0,s.jsx)(L,{product:a,profile:l,clientSecret:m||void 0,orderId:c||void 0,amount:x||void 0,buyerEmail:f||void 0,onStepChange:j,onOrderInitialized:N,onPaymentSuccess:k,onBack:()=>j("payment-options"),onClose:i});case"success":return(0,s.jsx)(z,{product:a,profile:l,orderId:c,amount:x,onClose:i});default:return null}})()});return"payment-options"===n?(0,s.jsx)(b,{amount:a.price,stripeAccountId:y,children:I}):"card-payment"!==n?I:m?(0,s.jsx)(w,{clientSecret:m,stripeAccountId:y,children:I},p):(0,s.jsx)(b,{amount:a.price,stripeAccountId:y,children:I},p)}function M(e){var t,a;let{show:l,onClose:i,product:n,onPurchase:m,profile:f}=e,[v,y]=(0,r.useState)(!0),[j,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[P,C]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{n&&(y(!0),b(!1),C(!1))},[n]),(0,r.useEffect)(()=>{l||(C(!1),w(!1))},[l]),!n)return null;let A="".concat(window.location.origin,"/").concat(f.username,"/digital-products#").concat(n.id),T=async()=>{S(!0),await navigator.clipboard.writeText(A),"vibrate"in navigator&&navigator.vibrate(50),setTimeout(()=>{S(!1)},2e3)},E=n.previewUrl||n.thumbnailUrl,L=!!E;return(0,s.jsx)(u.e,{show:l,as:r.Fragment,children:(0,s.jsxs)(x.lG,{as:"div",className:"relative z-50",onClose:i,children:[(0,s.jsx)(u._,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full md:items-center md:justify-center md:p-4 lg:p-6",children:(0,s.jsx)(x.Lj,{className:"w-full ".concat(P?"max-w-2xl":"max-w-6xl"," min-h-screen md:min-h-0 md:rounded-2xl bg-white dark:bg-black md:border md:border-gray-200 dark:md:border-white/20 shadow-2xl transition-all duration-300"),children:P?(0,s.jsx)("div",{className:"p-4 sm:p-6 md:p-8",children:(0,s.jsx)(_,{product:n,profile:f,onClose:()=>{C(!1),i()}})}):(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 sm:mb-6 md:mb-8",children:[(0,s.jsxs)("div",{className:"flex-1 pr-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[f.profileImage?(0,s.jsx)("div",{className:"relative w-10 sm:w-12 h-10 sm:h-12 rounded-full overflow-hidden border border-gray-200 dark:border-white/20",children:(0,s.jsx)(c.A,{src:o.A.getImageUrl({src:f.profileImage}),alt:f.username,layout:"fill",style:{objectFit:"cover"}})}):(0,s.jsx)("div",{className:"w-10 sm:w-12 h-10 sm:h-12 bg-gray-100 dark:bg-white/10 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-gray-900 dark:text-white text-xs sm:text-sm font-bold",children:null==(a=f.username)||null==(t=a[0])?void 0:t.toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Digital Product by"}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-white",children:["@",f.username]})]})]}),(0,s.jsx)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:n.title})]}),(0,s.jsx)("button",{onClick:i,className:"p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 sm:w-6 h-5 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.description&&(0,s.jsxs)(p.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-4 sm:mb-6 md:mb-8 p-4 sm:p-6 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,s.jsx)("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-white mb-2 sm:mb-3",children:"About this product"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:n.description})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[(0,s.jsxs)("div",{children:[!L||j?(0,s.jsx)("div",{className:"relative w-full h-[300px] sm:h-[350px] md:h-[400px] lg:h-[450px] flex items-center justify-center bg-gray-50 dark:bg-white/5 rounded-xl border border-gray-200 dark:border-white/20",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-5xl sm:text-6xl md:text-7xl mb-3 sm:mb-4 block opacity-30",children:d.f[n.fileType]}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm font-medium",children:"No preview available"})]})}):"video"===n.fileType&&n.previewUrl?(0,s.jsx)("div",{className:"relative w-full h-[300px] sm:h-[350px] md:h-[400px] lg:h-[450px] bg-black rounded-xl overflow-hidden border border-gray-200 dark:border-white/20",children:(0,s.jsx)("video",{controls:!0,className:"w-full h-full object-contain",src:n.previewUrl,children:"Your browser does not support the video tag."})}):(0,s.jsxs)("div",{className:"relative w-full h-[300px] sm:h-[350px] md:h-[400px] lg:h-[450px] bg-gray-50 dark:bg-white/5 rounded-xl overflow-hidden border border-gray-200 dark:border-white/20",children:[v&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 border-2 border-gray-300 dark:border-gray-600 border-t-black dark:border-t-white rounded-full animate-spin"}),(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-xs sm:text-sm mt-2 sm:mt-3",children:"Loading preview..."})]})}),(0,s.jsx)(c.A,{src:E,alt:n.title,layout:"fill",style:{objectFit:"contain"},className:"rounded-xl",onLoadingComplete:()=>y(!1)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-3 sm:mt-4 p-3 sm:p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 rounded-lg bg-white dark:bg-black border border-gray-200 dark:border-white/20 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-base sm:text-lg",children:d.f[n.fileType]})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-xs sm:text-sm font-medium text-gray-900 dark:text-white",children:[n.fileType.toUpperCase()," File"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(0,d.v)(n.fileSize)})]})]}),n.downloadCount>0&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n.downloadCount," downloads"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"space-y-4 sm:space-y-6 flex-1",children:[(0,s.jsxs)("div",{className:"p-4 sm:p-6 bg-gray-50 dark:bg-white/5 rounded-xl",children:[(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-1 sm:mb-2",children:"Price"}),(0,s.jsxs)("p",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white",children:["$",n.price.toFixed(2)]}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5 sm:mt-1",children:"One-time purchase"})]}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,s.jsx)("h3",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-white",children:"What's included"}),(0,s.jsxs)("ul",{className:"space-y-2 sm:space-y-3",children:[(0,s.jsxs)("li",{className:"flex items-start gap-2 sm:gap-3",children:[(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Instant download after purchase"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2 sm:gap-3",children:[(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Lifetime access to your files"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2 sm:gap-3",children:[(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"Secure payment processing"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2 sm:gap-3",children:[(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300",children:"30-day money back guarantee"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4 mt-6 sm:mt-8",children:[(0,s.jsx)(p.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>C(!0),className:"w-full px-6 sm:px-8 py-3 sm:py-4 bg-black dark:bg-white text-white dark:text-black font-semibold rounded-xl hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors text-sm sm:text-base",children:"Purchase Now"}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsxs)("button",{onClick:()=>w(!N),className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-3.5 sm:w-4 h-3.5 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.632 2.684c-.202.404-.5.76-.868 1.032m0 0a3 3 0 01-4.243 0m4.243 0c.368-.272.666-.628.868-1.032m-4.243 1.032c-.202-.404-.5-.76-.868-1.032M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),"Share this product"]})}),(0,s.jsx)(g.N,{children:N&&(0,s.jsxs)(p.P.div,{initial:{opacity:0,scale:.9,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},className:"flex items-center justify-center gap-1.5 sm:gap-2",children:[(0,s.jsx)(h.uI,{url:A,children:(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-lg flex items-center justify-center transition-colors",children:(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})}),(0,s.jsx)(h.r6,{url:A,title:n.title,children:(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-lg flex items-center justify-center transition-colors",children:(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})}),(0,s.jsx)(h.Kz,{url:A,title:n.title,children:(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-lg flex items-center justify-center transition-colors",children:(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})}),(0,s.jsx)(h.VI,{url:A,title:n.title,children:(0,s.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-lg flex items-center justify-center transition-colors",children:(0,s.jsx)("svg",{className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-700 dark:text-gray-300",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M11.944 0A12 12 0 1 0 24 12 11.996 11.996 0 0 0 11.944 0ZM16.448 7.584a.48.48 0 0 1 .432.612l-2.124 10.02a.357.357 0 0 1-.516.252l-3.252-2.412-1.74 1.692a.336.336 0 0 1-.564-.168l-.732-3.384-3-1.044a.36.36 0 0 1 0-.672l12.372-4.776a.456.456 0 0 1 .624.18Z"})})})}),(0,s.jsx)(p.P.button,{onClick:T,className:"w-8 sm:w-10 h-8 sm:h-10 bg-gray-100 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-lg flex items-center justify-center transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(g.N,{mode:"wait",children:k?(0,s.jsx)(p.P.svg,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"w-4 sm:w-5 h-4 sm:h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})},"check"):(0,s.jsx)(p.P.svg,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"w-4 sm:w-5 h-4 sm:h-5 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})},"copy")})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 sm:gap-3 pt-3 sm:pt-4 opacity-50",children:[(0,s.jsx)(I.nL,{className:"h-5 sm:h-6"}),(0,s.jsx)(I.uI,{className:"h-5 sm:h-6"}),(0,s.jsx)(I.Nx,{className:"h-5 sm:h-6"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"and more"})]})]})]})]})]})})})})]})})}var B=a(51156),U=a(23413);function F(e){var t;let{profile:a,isShopPage:o,onProductCountChange:c,skipRedirect:d=!1}=e,{theme:u}=(0,n.eP)(),x=(0,l.useRouter)(),[h,p]=(0,r.useState)([]),[g,f]=(0,r.useState)(!0),[v,y]=(0,r.useState)(!1),[j,b]=(0,r.useState)(null),N=(0,r.useRef)(null),{propagate:w}=(0,B.A)(N),k=async()=>{f(!0);try{let e=await (0,i.PD)(a.id);if(e&&Array.isArray(e.data)){let t=e.data.filter(e=>"pay_to_unlock"!==e.type);p(t),c&&c(t.length)}else p([]),c&&c(0);!d&&o&&(!e.data||e.data.length<1)&&x.push("/".concat(a.username))}catch(e){p([]),c&&c(0)}finally{f(!1)}};(0,r.useEffect)(()=>{(null==a?void 0:a.id)&&k()},[a]);let I=e=>{w&&(b(e),U.Nu.productViewed({id:e.id,name:e.title,price:e.price,category:"digital-product",currency:e.currency||"USD"}),setTimeout(()=>{y(!0)},50))};return(null==a||null==(t=a.stripeStatus)?void 0:t.stripeEnabled)&&(o||h&&0!==h.length||g)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{id:"digitalProductsContainer",className:"max-w-full",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"mb-4 products-container ".concat(o?"products-container-grid":"products-container-horizontal"),ref:N,style:{overflowX:o?"initial":"auto",cursor:o?"default":"grab"},children:g?null:h.map(e=>(0,s.jsx)(m,{product:e,onSelect:I,webTheme:null==a?void 0:a.webTheme},e.id))})}),(0,s.jsx)(M,{profile:a,show:v,onClose:()=>y(!1),product:j,onPurchase:()=>{}})]})}):null}},22117:(e,t,a)=>{a.d(t,{aZ:()=>o,kY:()=>n});var s=a(78567),r=a(54040);let l=s.A.config.apiEndpoints.common,i=s.A.config.apiEndpoints.user,n=async e=>{let t="".concat(l,"/common/api/v1/static/contactPopupText").concat(e);return new Promise((e,a)=>{(0,r.HU)(t,{},!1).then(t=>{(null==t?void 0:t.response)?e(t.response):e(0)})})},o=async e=>{let t="".concat(i,"/user/api/v1/profile/link/metadata");return new Promise((a,s)=>{(0,r.rU)(t,e,{},!0).then(e=>{(null==e?void 0:e.response)?a(e.response):a(0)})})}},27910:(e,t,a)=>{a.r(t),a.d(t,{__N_SSP:()=>I,default:()=>S,getCustomThemeVariables:()=>C});var s=a(37876),r=a(14232),l=a(22117),i=a(52289),n=a(32938),o=a(18847),c=a.n(o),d=a(45261),m=a(77328),u=a.n(m),x=a(16632),h=a(48156),p=a(33870),g=a(10841),f=a.n(g),v=a(14e3),y=a(89099),j=a(47373),b=a(3346),N=a(37093),w=a(11281);let k=c()(a.e(3243).then(a.bind(a,63243)),{loadableGenerated:{webpack:()=>[63243]}});var I=!0;function S(e){var t,a;let{profile:o,ip:c}=e,{theme:m}=(0,h.eP)(),p=(0,y.useRouter)(),g=(0,r.useRef)(!1),[I,S]=(0,r.useState)(null),[A,T]=(0,r.useState)(null),E=!!(null==o||null==(t=o.stripeStatus)?void 0:t.stripeEnabled),[L,z]=(0,r.useState)(!1),[_,M]=(0,r.useState)([]),[B,U]=(0,r.useState)(""),[F,R]=(0,r.useState)({is_open:!1,title:"",text:"",icon:""}),[V,H]=(0,r.useState)({sequence:0,text:""}),[O,D]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(!1),q=(0,r.useCallback)(e=>{S(e)},[]),X=(0,r.useCallback)(e=>{T(e)},[]),G=null==o||null==(a=o.webLinks)?void 0:a.flatMap(e=>{var t;return null==e||null==(t=e.links)?void 0:t.map(e=>null==e?void 0:e.linkValue)}),$=i.A.getImageUrl({src:(null==o?void 0:o.profileImageWebp)||(null==o?void 0:o.profileImage)}),K={"@context":"https://schema.org/","@type":"ProfilePage",dateCreated:f()(null==o?void 0:o.createdAt).toISOString(),dateModified:f()(null==o?void 0:o.updatedAt).toISOString(),mainEntity:{"@id":null==o?void 0:o.username,"@type":"Person",name:"@".concat(null==o?void 0:o.username),alternateName:"@".concat(null==o?void 0:o.username," Linkme Profile"),identifier:null==o?void 0:o.username,description:"Join Linkme: Your Personalized Link in Bio",image:$,url:"https://link.me/".concat(null==o?void 0:o.username),sameAs:G},significantLink:"https://link.me/".concat(null==o?void 0:o.username),isPartOf:"https://link.me/",thumbnailUrl:$,genre:"",keywords:""};(0,r.useEffect)(()=>{d.A.setLocalstorage(x.Ay.CLIENT_IP,c,!1)},[c]),(0,r.useEffect)(()=>{(null==o?void 0:o.id)&&d.A.setLocalstorage(x.Ay.USER_PAGE_UUID,o.id,!1)},[null==o?void 0:o.id]),(0,r.useEffect)(()=>{let e=getComputedStyle(document.body).getPropertyValue("--customBackgroundColor");""==e&&(e=getComputedStyle(document.body).getPropertyValue("--colorPrimary")),x.jw.forEach(t=>{var a;null==(a=document.querySelector("meta[name=".concat(t,"]")))||a.setAttribute("content",e)})},[m]),(0,r.useEffect)(()=>{(null==o?void 0:o.username)&&!E&&(g.current||(g.current=!0,p.push("/".concat(o.username))))},[E,null==o?void 0:o.username,p]),(0,r.useEffect)(()=>{(null==o?void 0:o.username)&&E&&null!==I&&null!==A&&(0!==I||0!==A||g.current||(g.current=!0,p.push("/".concat(o.username))))},[A,I,E,null==o?void 0:o.username,p]);let Z=(0,r.useCallback)(e=>{var t,a,s,r,l,i;let n=null!=(i=window.scrollY)?i:0,o=(n-50)/150;null==(a=document.getElementById("topHeader"))||null==(t=a.style)||t.setProperty("opacity","".concat(o)),null==(r=document.getElementById("topHeaderProfileAndName"))||null==(s=r.style)||s.setProperty("opacity","".concat(o));let c=null==(l=document)?void 0:l.getElementById("overlayopacity");if(c){let e=null==c?void 0:c.offsetHeight;c.style.setProperty("opacity","".concat((1-(e-n)/e)*2+0));let t=document.getElementById("overlayopacity"),a=null==t?void 0:t.offsetHeight;t.style.setProperty("opacity","".concat((1-(a-n)/a)*1.7+0))}},[]);(0,r.useEffect)(()=>{let e=window;return null==e||e.addEventListener("scroll",Z,{passive:!0}),()=>{d.A.removeLocalstorage(x.Ay.USER_PAGE_UUID),null==e||e.removeEventListener("scroll",Z)}},[Z]),(0,r.useEffect)(()=>{(null==o?void 0:o.username)&&(0,l.kY)("?username=".concat(o.username)).then(e=>{H(e)})},[o]);let J=(0,r.useMemo)(()=>{if(null==o?void 0:o.id){let e=[o.username,o.firstName,o.lastName,"".concat(o.firstName," ").concat(o.lastName),"@".concat(o.username),"shop","merch","".concat(o.username," shop"),"".concat(o.firstName,"'s shop"),"".concat(o.firstName," ").concat(o.lastName," shop"),"@".concat(o.username," store"),"shop @".concat(o.username),"buy from ".concat(o.firstName),"buy from ".concat(o.firstName," ").concat(o.lastName),"".concat(o.username," products"),"".concat(o.firstName,"'s products")];return{title:(0,n.r2)(o),image:i.A.getImageUrl({src:(null==o?void 0:o.profileImageWebp)||(null==o?void 0:o.profileImage)}),description:(0,n.T6)(o),keywords:(0,n.qF)(e),canonical:(0,n.BX)(w.b.USERNAME.SHOP(o.username))}}},[o]),Q=(0,r.useMemo)(()=>P(o),[o]),ee=(0,r.useMemo)(()=>C(null==o?void 0:o.customisedTheme),[o]);d.A.getSessionstorage(x.Ay.SHARE_INFO_POPUP,!0);let[et,ea]=(0,r.useState)(!1),es=(0,v.useSearchParams)();return(0,r.useEffect)(()=>{(null==es?void 0:es.get("signedUp"))&&"true"===es.get("signedUp")&&ea(!0)},[null==es?void 0:es.get("signedUp")]),(0,s.jsxs)("div",{id:"profileContainer",className:"dark max-w-5xl m-auto",children:[(0,s.jsxs)(u(),{children:[(0,s.jsx)("meta",{name:"themeName",content:"dark"}),(0,s.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(K)}}),(0,s.jsx)("style",{children:ee})]}),Q,(0,s.jsx)(k,{data:J}),(0,s.jsx)("div",{className:"flex flex-col items-center pt-8",children:(0,s.jsx)(N.default,{profile:o})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 w-full mt-6",children:[(0,s.jsx)(j.A,{profile:o,isShopPage:!0,onProductCountChange:q,skipRedirect:!0},o.id),(0,s.jsx)(b.A,{profile:o,isShopPage:!0,onProductCountChange:X,skipRedirect:!0},"digital-".concat(o.id))]})]})}let P=e=>{var t;let a=(0,r.createElement)("link",{fetchpriority:"high",rel:"preload",as:"image",href:i.A.getImageUrl({src:(null==e?void 0:e.profileImageWebp)||(null==e?void 0:e.profileImage)})}),l=null==e||null==(t=e.webLinks)?void 0:t.map((e,t)=>{var a;return(null==e||null==(a=e.links)?void 0:a.length)>0?(0,r.createElement)("link",{key:t,fetchpriority:"high",rel:"preload",as:"image",href:i.A.getImageUrl({src:e.links[0].linkImage,width:71,height:71})}):(0,s.jsx)(s.Fragment,{})});return(0,s.jsxs)(u(),{children:[a,l]})},C=e=>{e||(e={});let t=":root {";if((null==e?void 0:e.verifiedIcon)&&e.verifiedIcon.length>0&&(t+="--customVerifiedColor1: ".concat(e.verifiedIcon,";"),t+="--customVerifiedColor2: ".concat(e.verifiedIcon,";")),(null==e?void 0:e.backgroundColor)&&e.backgroundColor.length>0){let a=null==e?void 0:e.backgroundColor;t+="--customBackgroundColor: ".concat(a,";"),t+="--customColorProfileBottomShadow3: var(--customBackgroundColor);",t+="--customColorProfileBottomShadow2_1: ".concat((0,p.Sd)(a,.1),";"),t+="--customColorProfileBottomShadow2_2: ".concat((0,p.Sd)(a,.3),";"),t+="--customColorProfileBottomShadow1: ".concat((0,p.Lu)(a),";"),t+="--customColorProfileBottomShadow0: ".concat((0,p.Lu)(a),";")}return(null==e?void 0:e.backgroundImage)&&e.backgroundImage.length>0&&(t+="--customBackgroundImage: ".concat(null==e?void 0:e.backgroundImage,";")),(null==e?void 0:e.mainTextColor)&&e.mainTextColor.length>0&&(t+="--colorTextMain: ".concat(e.mainTextColor,";")),(null==e?void 0:e.level1TextColor)&&e.level1TextColor.length>0&&(t+="--colorTextLevel1: ".concat(e.level1TextColor,";")),(null==e?void 0:e.level2TextColor)&&e.level2TextColor.length>0&&(t+="--colorTextLevel2: ".concat(e.level2TextColor,";")),(null==e?void 0:e.bioBackground)&&e.bioBackground.length>0&&(t+="--customSurfaceBackgroundColor: ".concat(e.bioBackground,";")),t+="}"}},47373:(e,t,a)=>{a.d(t,{A:()=>T});var s=a(37876),r=a(14232),l=a(14e3),i=a(83779),n=a(45261),o=a(16632),c=a(48156),d=a(52289),m=a(55451);function u(e){let{product:t,onSelect:a,webTheme:r}=e,l=t.productInfo.mockup_file_url,i="light"===r;if(t.mockups){let e="string"==typeof t.mockups?JSON.parse(t.mockups):t.mockups,a=e.find(e=>"ai"===e.placement),s=e[0];(null==a?void 0:a.images)&&a.images.length>0?l=d.A.getImageUrl({src:a.images[0],w:786}):(null==s?void 0:s.images)&&s.images.length>0&&(l=d.A.getImageUrl({src:s.images[0],w:786}))}return(0,s.jsxs)("div",{className:"product-details cursor-pointer",onClick:()=>a(t),children:[(0,s.jsx)("div",{className:"product-image-container",children:(0,s.jsx)(m.A,{src:l,alt:t.templateTitle,style:{objectFit:"cover"}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"product-name ".concat(i?"!text-[#000]":"!text-[#fff]"),children:t.templateTitle||t.productInfo.title}),t.variants&&t.variants.length>0&&(0,s.jsx)("div",{className:"product-price mt-2 ".concat(i?"!text-gray-800":"!text-gray-400"),children:(()=>{if(!t.variants||0===t.variants.length)return null;let e=t.variants.map(e=>e.finalPrice),a=Math.min(...e),s=Math.max(...e);return a===s?"$".concat(a.toFixed(2)):"$".concat(a.toFixed(2)," - $").concat(s.toFixed(2))})()})]})]})}var x=a(5797),h=a(86066),p=a(99628),g=a(77328),f=a.n(g),v=a(27910);function y(e){let{profile:t,show:a,onClose:l,product:i,currentVariantImage:n,selectedColor:o,selectedSize:c,selectedVariant:d,availableCombinations:m,onSelectColor:u,onSelectSize:g,onAddToCart:y,onOpenSizeGuide:j,swiperInstance:b,onImageChange:N}=e,[w,k]=(0,r.useState)(m);(0,r.useEffect)(()=>{if(i){if(0===i.productInfo.colors.length)return void k(i.variants.filter(e=>void 0!==e.size&&(e.isInStock||1===e.in_stock||"in_stock"===e.stockStatus)).map(e=>({variantId:e.variantId,size:e.size||"",color:""})));k(m.filter(e=>{let t=i.variants.find(t=>t.variantId===e.variantId);return t&&(t.isInStock||1===t.in_stock||"in_stock"===t.stockStatus)}))}},[i,m]);let I=(0,r.useMemo)(()=>(null==t?void 0:t.customisedTheme)?(0,v.getCustomThemeVariables)(null==t?void 0:t.customisedTheme):"",[null==t?void 0:t.customisedTheme]),S="light"===t.webTheme?"light":"dark";return(0,s.jsx)(x.e,{show:a,as:r.Fragment,children:(0,s.jsxs)(h.lG,{as:"div",className:"relative z-50 ".concat(S),onClose:l,children:[(0,s.jsxs)(f(),{children:[(0,s.jsx)("meta",{name:"themeName",content:S}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"}),(0,s.jsx)("meta",{"http-equiv":"x-dns-prefetch-control",content:"on"}),(0,s.jsx)("style",{children:I})]}),(0,s.jsx)(x._,{as:"div",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black/80"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full md:items-center md:justify-center md:p-4",children:(0,s.jsx)(h.Lj,{className:"w-full min-h-full max-w-5xl md:rounded-2xl bgPrimaryCustom md:border md:border-gray-700 md:p-4 shadow-2xl",children:i&&(0,s.jsx)(p.A,{profile:t,product:i,currentVariantImage:n,selectedColor:o,selectedSize:c,selectedVariant:d,availableCombinations:w,onSelectColor:u,onSelectSize:g,onAddToCart:y,onOpenSizeGuide:j,onImageChange:N,isModal:!0,onClose:l})})})})]})})}var j=a(70988),b=a(84503),N=a(44600),w=a(9603),k=a(79260),I=a(18343),S=a(23413),P=a(51156),C=a(4547),A=a(33537);function T(e){var t,a;let{profile:m,isShopPage:x,onProductCountChange:h,skipRedirect:p=!1}=e,{theme:g}=(0,c.eP)(),[f,v]=(0,r.useState)([]),[T,E]=(0,r.useState)(!0),L=(0,r.useRef)(null),{cartItems:z,setCartItems:_,addItem:M,removeItem:B,getItemCount:U}=(0,C.A)(m.id),[F,R]=(0,r.useState)(!1),[V,H]=(0,r.useState)(null),[O,D]=(0,r.useState)(""),[W,Y]=(0,r.useState)(""),[q,X]=(0,r.useState)(null),[G,$]=(0,r.useState)(null),[K,Z]=(0,r.useState)([]),[J,Q]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(!1),[er,el]=(0,r.useState)(!1),[ei,en]=(0,r.useState)(null),[eo,ec]=(0,r.useState)(!1),[ed,em]=(0,r.useState)(!1),[eu,ex]=(0,r.useState)(""),[eh,ep]=(0,r.useState)(null),eg=(0,r.useRef)(null),{propagate:ef}=(0,P.A)(eg),ev=(0,l.useRouter)();(0,r.useEffect)(()=>{m.id&&n.A.setLocalstorage(o.Ay.USER_PAGE_UUID,m.id,!1)},[null==m?void 0:m.id]),(0,r.useEffect)(()=>{let e=getComputedStyle(document.body).getPropertyValue("--customBackgroundColor");""===e&&(e=getComputedStyle(document.body).getPropertyValue("--colorPrimary")),o.jw.forEach(t=>{var a;null==(a=document.querySelector("meta[name=".concat(t,"]")))||a.setAttribute("content",e)})},[g]);let ey=async()=>{E(!0);try{var e;let t=await (0,i.KD)(m.id);t&&Array.isArray(t.data)?(v(t.data),h&&h(t.data.length)):(v([]),h&&h(0)),p||!x||t.data&&!(t.data.length<1)&&(null==m||null==(e=m.stripeStatus)?void 0:e.stripeEnabled)||ev.push("/".concat(m.username))}catch(e){v([]),h&&h(0)}finally{E(!1)}};(0,r.useEffect)(()=>{(null==m?void 0:m.username)&&ey()},[m]),(0,r.useEffect)(()=>{if((null==m?void 0:m.username)==="antjr._"&&f.length>0){let e=f.find(e=>0x543c657===e.productInfo.id);e&&eN(e)}},[f,null==m?void 0:m.username]);let ej=async e=>{ec(!0),Q(!0);try{let t=await (0,i.oX)(e.toString());(null==t?void 0:t.size_tables)?en(t):en(null)}catch(e){en(null)}finally{ec(!1)}},eb=(e,t)=>{var a,s;let r=t||V;if(!(null==r?void 0:r.mockups))return;let l=Array.isArray(r.mockups)?r.mockups:JSON.parse(r.mockups),i=l.find(t=>"front"===t.placement&&t.variantId===e),n=l.find(t=>t.variantId===e);(null==i||null==(a=i.images)?void 0:a[0])?$(d.A.getImageUrl({src:i.images[0]})):(null==n||null==(s=n.images)?void 0:s[0])&&$(d.A.getImageUrl({src:n.images[0]}))},eN=e=>{if(L.current&&(clearTimeout(L.current),L.current=null),ef){var t;if(H(e),S.Nu.productViewed({id:e.templateId,name:e.templateTitle,price:(null==(t=e.variants[0])?void 0:t.finalPrice)||0,category:"merchandise",currency:"USD"}),e.mockups){let t="string"==typeof e.mockups?JSON.parse(e.mockups):e.mockups,a=t.find(e=>"ai"===e.placement),s=t[0];(null==a?void 0:a.images)&&a.images.length>0?$(d.A.getImageUrl({src:a.images[0]})):(null==s?void 0:s.images)&&s.images.length>0?$(d.A.getImageUrl({src:s.images[0]})):$(e.productInfo.mockup_file_url)}else $(e.productInfo.mockup_file_url);e.productInfo.sizes.length;let a=1===e.productInfo.colors.length,s=0===e.productInfo.colors.length,r=e.variants.map(t=>({color:s?"":a?e.productInfo.colors[0].color_name:(0,A.dq)(t.variantName),size:t.variantSize||t.size,variantId:t.variantId}));if(Z(r),r.length>0){if(s){D("");let t=e.productInfo.sizes.find(e=>r.some(t=>t.size===e));if(t){Y(t);let a=r.find(e=>e.size===t);if(a){let t=e.variants.find(e=>e.variantId===a.variantId);t&&X({variantId:t.variantId,variantName:t.variantName,finalPrice:t.finalPrice})}}}else if(e.productInfo.colors.length>0){let t=e.productInfo.colors.find(t=>r.some(a=>a.color===t.color_name&&e.variants.some(e=>e.variantId===a.variantId&&(e.isInStock||1===e.in_stock||"in_stock"===e.stockStatus))));if(t){let a=t.color_name;D(a);let s=r.filter(t=>t.color===a&&e.variants.some(e=>e.variantId===t.variantId&&(e.isInStock||1===e.in_stock||"in_stock"===e.stockStatus))).map(e=>e.size),l=e.productInfo.sizes.find(e=>s.includes(e));if(l){Y(l);let t=r.find(e=>e.color===a&&e.size===l);if(t){let a=e.variants.find(e=>e.variantId===t.variantId);a&&(X({variantId:a.variantId,variantName:a.variantName,finalPrice:a.finalPrice}),eb(a.variantId,e))}}}else D(""),Y(""),X(null)}}setTimeout(()=>{R(!0)},50)}};return(x||f&&Array.isArray(f)&&!(f.length<1))&&(null==m||null==(t=m.stripeStatus)?void 0:t.stripeEnabled)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{id:"fblProductsContainer",className:"".concat(g," max-w-full"),children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("div",{className:"products-container ".concat(x?"products-container-grid":"products-container-horizontal"),ref:eg,onScroll:()=>{},style:{overflowX:x?"initial":"auto",cursor:x?"default":"grab"},children:T?Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"product-details",children:[(0,s.jsx)("div",{className:"product-image-container bg-gray-700 animate-pulse h-40 w-40"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"product-name-shimmer bg-gray-700 animate-pulse h-6 w-32 my-2"}),(0,s.jsx)("div",{className:"product-price-shimmer bg-gray-700 animate-pulse h-6 w-16"})]})]},"shimmer-".concat(t))):f.map((e,t)=>(0,s.jsx)(u,{product:e,onSelect:eN,webTheme:null==m?void 0:m.webTheme},"product-".concat(t)))})}),(0,s.jsx)(y,{profile:m,show:F,onClose:()=>R(!1),product:V,currentVariantImage:G,selectedColor:O,selectedSize:W,selectedVariant:q,availableCombinations:K,onSelectColor:e=>{if(D(e),(null==V?void 0:V.productInfo.sizes.length)===1&&V){let t=V.productInfo.sizes[0];Y(t);let a=K.find(a=>a.color===e&&a.size===t);if(a){let e=V.variants.find(e=>e.variantId===a.variantId);e&&(X({variantId:e.variantId,variantName:e.variantName,finalPrice:e.finalPrice}),eb(e.variantId))}return}if(V){let t=K.filter(t=>t.color===e&&V.variants.some(e=>e.variantId===t.variantId&&(e.isInStock||1===e.in_stock||"in_stock"===e.stockStatus))).map(e=>e.size);if(W&&t.includes(W)){let t=K.find(t=>t.color===e&&t.size===W);if(t){let e=V.variants.find(e=>e.variantId===t.variantId);e&&(X({variantId:e.variantId,variantName:e.variantName,finalPrice:e.finalPrice}),eb(t.variantId))}}else{let a=V.productInfo.sizes.find(e=>t.includes(e));if(a){Y(a);let t=K.find(t=>t.color===e&&t.size===a);if(t){let e=V.variants.find(e=>e.variantId===t.variantId);e&&(X({variantId:e.variantId,variantName:e.variantName,finalPrice:e.finalPrice}),eb(t.variantId))}}else Y(""),X(null)}}},onSelectSize:e=>{if(Y(e),V&&0===V.productInfo.colors.length){let t=V.variants.find(t=>t.size===e&&(t.isInStock||1===t.in_stock||"in_stock"===t.stockStatus));t&&(X({variantId:t.variantId,variantName:t.variantName,finalPrice:t.finalPrice}),eb(t.variantId));return}if((null==V?void 0:V.productInfo.colors.length)===1&&V){let t=V.productInfo.colors[0].color_name;D(t);let a=K.find(a=>a.color===t&&a.size===e);if(a){let e=V.variants.find(e=>e.variantId===a.variantId);e&&(X({variantId:e.variantId,variantName:e.variantName,finalPrice:e.finalPrice}),eb(e.variantId))}return}if(V&&O){let t=K.find(t=>t.color===O&&t.size===e);if(t){let e=V.variants.find(e=>e.variantId===t.variantId);e&&(X({variantId:e.variantId,variantName:e.variantName,finalPrice:e.finalPrice}),eb(t.variantId))}else D(""),X(null)}else if(V){let t=K.filter(t=>t.size===e).map(e=>e.color);if(t.length>0){let a=V.productInfo.colors.find(e=>t.includes(e.color_name));if(a){D(a.color_name);let t=K.find(t=>t.color===a.color_name&&t.size===e);if(t){let e=V.variants.find(e=>e.variantId===t.variantId);e&&(X({variantId:e.variantId,variantName:e.variantName,finalPrice:e.finalPrice}),eb(t.variantId))}}}}},onAddToCart:()=>{if(!V||!q)return void alert("Please select product options");let e=1===V.productInfo.sizes.length,t=1===V.productInfo.colors.length,a=0===V.productInfo.colors.length,s=O;!s&&t&&(s=V.productInfo.colors[0].color_name),a&&(s="Default");let r=W;if(!r&&e&&(r=V.productInfo.sizes[0]),!s&&!a||!r)return void alert("Please select both color and size");let l=G||V.productInfo.mockup_file_url||"",i={variantId:q.variantId,templateId:V.templateId,variantName:q.variantName,quantity:1,price:q.finalPrice,color:s,size:r,image:l,variantImage:l,templateTitle:V.templateTitle,productTitle:V.productInfo.title};S.Nu.productAdded({id:V.templateId,name:V.templateTitle||V.productInfo.title,price:q.finalPrice,quantity:1,category:"merchandise",currency:"USD"}),M(i),R(!1),em(!0);let n=setTimeout(()=>{D(""),Y(""),X(null),$(null)},2e3);L.current&&clearTimeout(L.current),L.current=n},onOpenSizeGuide:e=>ej(e),swiperInstance:eh,onImageChange:$}),(0,s.jsx)(j.A,{show:J,onClose:()=>Q(!1),sizeData:ei,sizeLoading:eo}),(0,s.jsx)(w.A,{show:ee,onClose:()=>et(!1)}),(0,s.jsx)(k.A,{show:ea,onClose:()=>es(!1)}),(0,s.jsx)(I.A,{show:er,onClose:()=>el(!1)}),(0,s.jsx)(b.A,{show:ed,onClose:()=>em(!1),cartItems:z,setCartItems:_,vendorUserId:(null==m?void 0:m.id)||0,theme:g,onRemoveItem:B,checkoutStepTitle:eu,onStepChange:e=>ex(e),onOpenPrivacyModal:()=>et(!0),onOpenTermsModal:()=>es(!0),onOpenReturnPolicyModal:()=>el(!0),stripeAccountId:null==m||null==(a=m.stripeStatus)?void 0:a.stripeAccountId}),(0,s.jsx)(N.A,{itemCount:U(),onClick:()=>em(!0)})]})}):null}},51156:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(14232);let r=e=>{let[t,a]=(0,s.useState)(!0),[r,l]=(0,s.useState)(!1),[i,n]=(0,s.useState)(0),[o,c]=(0,s.useState)(0),d=(0,s.useRef)(0),m=(0,s.useRef)(0),u=(0,s.useRef)(!1),x=e=>{r||(e.stopPropagation(),l(!0),n(e.clientX),c(e.clientY),d.current=e.clientX,m.current=e.clientY,u.current=!1,e.preventDefault())},h=t=>{if(r){t.stopPropagation();let s=t.clientX-d.current,r=t.clientY-m.current;(Math.abs(s)>8||Math.abs(r)>8)&&!u.current&&(u.current=!0,a(!1)),e.current&&(e.current.scrollLeft-=-i+t.clientX,e.current.scrollTop-=-o+t.clientY),n(t.clientX),c(t.clientY)}},p=e=>{r&&(e.stopPropagation(),l(!1)),y()},g=e=>{t||(e.stopPropagation(),a(!0))},f=e=>{if(!r){l(!0);let t=e.touches&&e.touches[0];t&&(n(t.clientX),c(t.clientY),d.current=t.clientX,m.current=t.clientY,u.current=!1)}},v=e=>{if(r){let t=e.touches&&e.touches[0];if(!t)return;e.stopPropagation();let s=t.clientX-d.current,r=t.clientY-m.current;(Math.abs(s)>8||Math.abs(r)>8)&&!u.current&&(u.current=!0,a(!1)),n(t.clientX),c(t.clientY)}},y=()=>{u.current?setTimeout(()=>a(!0),100):a(!0)},j=()=>{r&&l(!1),y()};return(0,s.useEffect)(()=>{let t=e.current;if(t)return t.addEventListener("mousedown",x),t.addEventListener("touchstart",f),t.addEventListener("mousemove",h),t.addEventListener("mouseup",p),t.addEventListener("touchmove",v,{passive:!0}),t.addEventListener("touchend",j),t.addEventListener("click",g),window.addEventListener("mouseup",p),()=>{t.removeEventListener("mousedown",x),t.removeEventListener("touchstart",f),t.removeEventListener("mousemove",h),t.removeEventListener("mouseup",p),t.removeEventListener("touchmove",v),t.removeEventListener("touchend",j),t.removeEventListener("click",g),window.removeEventListener("mouseup",p)}}),{dragging:r,propagate:t}}},61862:(e,t,a)=>{a.d(t,{f:()=>s,v:()=>r});let s={image:"\uD83D\uDDBC️",video:"\uD83C\uDFAC",pdf:"\uD83D\uDCC4",zip:"\uD83D\uDCE6",other:"\uD83D\uDCCE"};function r(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}}}]);